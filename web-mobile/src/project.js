require=function e(r,o,t){function a(i,n){if(!o[i]){if(!r[i]){var h="function"==typeof require&&require;if(!n&&h)return h(i,!0);if(c)return c(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var l=o[i]={exports:{}};r[i][0].call(l.exports,function(e){var o=r[i][1][e];return a(o||e)},l,l.exports,e,r,o,t)}return o[i].exports}for(var c="function"==typeof require&&require,i=0;i<t.length;i++)a(t[i]);return a}({butterFly:[function(e,r,o){"use strict";cc._RF.push(r,"9bd0eNStnhJIrsztX39DDxt","butterFly");var t=null;cc.Class({extends:cc.Component,properties:{flyNode:cc.Node,flyAnimPrefab:cc.Prefab},onLoad:function(){t=this},flyFun:function(e){for(var r=1;r<7;r++)e.colorid[0]==r&&t.createFly(e,r),e.colorid[1]==r&&t.createFly(e,r)},flyflyFun:function(e,r){for(var o=1+Math.floor(1.99*Math.random()),a=1+Math.floor(1.99*Math.random()),c=1;c<7;c++)r&&(r.colorid[0]==c&&(1==a&&t.createFly(r,c),t.createFly(r,c)),r.colorid[1]==c&&(2==a&&t.createFly(r,c),t.createFly(r,c))),e.colorid[0]==c&&(1==o&&t.createFly(e,c),t.createFly(e,c)),e.colorid[1]==c&&(2==o&&t.createFly(e,c),t.createFly(e,c))},flytwFun:function(e,r){if("h"==r)for(var o=1;o<7;o++)e.colorid[0]==o&&t.createFly(e,o+6,3,"h",e.colorid[0]),e.colorid[1]==o&&t.createFly(e,o+6,3,"h",e.colorid[1]);else if("v"==r)for(o=1;o<7;o++)e.colorid[0]==o&&t.createFly(e,o+12,3,"v",e.colorid[0]),e.colorid[1]==o&&t.createFly(e,o+12,3,"v",e.colorid[1])},flybzFun:function(e){for(var r=1;r<7;r++)e.colorid[0]==r&&t.createFly(e,r+18,2,"b",e.colorid[0]),e.colorid[1]==r&&t.createFly(e,r+18,2,"b",e.colorid[1])},createFly:function(e,r,o,a,c){if(cc.xx.gameJS.getFlyNum()<15){var i=cc.instantiate(t.flyAnimPrefab);t.flyNode.addChild(i),i.x=e.x,i.y=e.y,c&&(i.colorId=c,i.fly=!0),3==o?"h"==a?(i.heightLevel=3,i.hv="h"):"v"==a&&(i.heightLevel=3,i.hv="v"):2==o&&(i.heightLevel=2,i.bz=!0),i.addComponent("flyBlock")}}}),cc._RF.pop()},{}],checkBlock:[function(e,r,o){"use strict";cc._RF.push(r,"b2b6dJTUuZOOJMA+is5FtVC","checkBlock");var t=e("heightLevelNode"),a=e("butterFly"),c=e("shootLine"),i=null;cc.Class({extends:cc.Component,properties:{fzBlock:cc.Prefab,twhSp:[cc.SpriteFrame],twvSp:[cc.SpriteFrame],bzSp:[cc.SpriteFrame],twBoom:cc.Prefab,shineingPrefab:cc.Prefab,colorPrefab:cc.Prefab,smbz:[cc.SpriteFrame]},onLoad:function(){(i=this).checkState="bzboom",i.bzij={i:-1,j:-1},i.bzNodeArr=[]},twhBoom:function(e,r){for(var o=0;o<gameLayArr[e].length;o++)if(gameLayArr[e][o]&&"-100"!=gameLayArr[e][o]&&"boom"!=gameLayArr[e][o].state)if(gameLayArr[e][o].delTime=.03*Math.abs(o-r),"h"==gameLayArr[e][o].hv)gameLayArr[e][o].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][o]):hcheckedArr.push(gameLayArr[e][o]);else if("v"==gameLayArr[e][o].hv)gameLayArr[e][o].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][o]):hcheckedArr.push(gameLayArr[e][o]),i.twvBoom(gameLayArr[e][o].j,gameLayArr[e][o].i);else if(1==gameLayArr[e][o].heightLevel){gameLayArr[e][o].state="boom",rcheckArr.push(gameLayArr[e][o]),gameLayArr[e][o].arr=[],gameLayArr[e][o].arr.push(gameLayArr[e][o]);var t=Math.floor(Math.random()*(colorArr.length-.1));i.checkRainBoom(gameLayArr[e][o],colorArr[t])}else if(5==gameLayArr[e][o].heightLevel){var a=cc.instantiate(gameLayArr[e][r]);a.heightLevel=gameLayArr[e][r].heightLevel,a.colorId=gameLayArr[e][r].colorId,a.hv=gameLayArr[e][r].hv,a.i=e,a.j=o,a.x=68*o-272,a.y=272-68*e,heightLevelArr.push(a),gameLayArr[e][o].state="boom",gameLayArr[e][o].hv="hh","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][o]):hcheckedArr.push(gameLayArr[e][o])}else gameLayArr[e][o].hv||gameLayArr[e][o].bz?gameLayArr[e][o].bz&&i.bzBoom(gameLayArr[e][o]):(gameLayArr[e][o].state="boom",gameLayArr[e][o].hv="hh","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][o]):hcheckedArr.push(gameLayArr[e][o]))},twvBoom:function(e,r){for(var o=0;o<gameLayArr.length;o++)if(gameLayArr[o][e]&&"-100"!=gameLayArr[o][e]&&"boom"!=gameLayArr[o][e].state)if(gameLayArr[o][e].delTime=.03*Math.abs(o-r),"h"==gameLayArr[o][e].hv)gameLayArr[o][e].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[o][e]):hcheckedArr.push(gameLayArr[o][e]),i.twhBoom(gameLayArr[o][e].i,gameLayArr[o][e].j);else if("v"==gameLayArr[o][e].hv)gameLayArr[o][e].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[o][e]):hcheckedArr.push(gameLayArr[o][e]);else if(1==gameLayArr[o][e].heightLevel){gameLayArr[o][e].state="boom",rcheckArr.push(gameLayArr[o][e]),gameLayArr[o][e].arr=[],gameLayArr[o][e].arr.push(gameLayArr[o][e]);var t=Math.floor(Math.random()*(colorArr.length-.1));i.checkRainBoom(gameLayArr[o][e],colorArr[t])}else if(5==gameLayArr[o][e].heightLevel){var a=cc.instantiate(gameLayArr[r][e]);a.heightLevel=gameLayArr[r][e].heightLevel,a.colorId=gameLayArr[r][e].colorId,a.hv=gameLayArr[r][e].hv,a.i=o,a.j=e,a.x=68*e-272,a.y=272-68*o,heightLevelArr.push(a),gameLayArr[o][e].state="boom",gameLayArr[o][e].hv="hh","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[r][o]):hcheckedArr.push(gameLayArr[r][o])}else gameLayArr[o][e].hv||gameLayArr[o][e].bz?gameLayArr[o][e].bz&&i.bzBoom(gameLayArr[o][e]):(gameLayArr[o][e].state="boom",gameLayArr[o][e].hv="vv","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[o][e]):hcheckedArr.push(gameLayArr[o][e]))},flyhBoom:function(e,r,o){for(var a=0;a<gameLayArr[e].length;a++)if(gameLayArr[e][a]&&"-100"!=gameLayArr[e][a]&&a!=r&&"boom"!=gameLayArr[e][a].state)if(gameLayArr[e][a].delTime=.03*Math.abs(a-r),"h"==gameLayArr[e][a].hv)gameLayArr[e][a].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][a]):hcheckedArr.push(gameLayArr[e][a]);else if("v"==gameLayArr[e][a].hv)gameLayArr[e][a].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][a]):hcheckedArr.push(gameLayArr[e][a]),i.twvBoom(gameLayArr[e][a].j,gameLayArr[e][a].i);else if(1==gameLayArr[e][a].heightLevel){gameLayArr[e][a].state="boom",rcheckArr.push(gameLayArr[e][a]),gameLayArr[e][a].arr=[],gameLayArr[e][a].arr.push(gameLayArr[e][a]);var c=Math.floor(Math.random()*(colorArr.length-.1));i.checkRainBoom(gameLayArr[e][a],colorArr[c])}else if(5==gameLayArr[e][a].heightLevel&&a!=r){var n=cc.instantiate(t.prototype.createTwH(o));n.heightLevel=3,n.colorId=o,n.hv="h",n.i=e,n.j=a,n.x=68*a-272,n.y=272-68*e,n.state="stand",heightLevelArr.push(n),gameLayArr[e][a].state="boom",gameLayArr[e][a].hv="h","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][a]):hcheckedArr.push(gameLayArr[e][a])}else gameLayArr[e][a].hv||gameLayArr[e][a].bz?gameLayArr[e][a].bz&&a!=r&&i.bzBoom(gameLayArr[e][a]):(gameLayArr[e][a].state="boom",gameLayArr[e][a].hv="hh","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][a]):hcheckedArr.push(gameLayArr[e][a]))},flyvBoom:function(e,r,o){for(var a=0;a<gameLayArr.length;a++)if(gameLayArr[a][e]&&"-100"!=gameLayArr[a][e]&&a!=r&&"boom"!=gameLayArr[a][e].state)if(gameLayArr[a][e].delTime=.03*Math.abs(a-r),"h"==gameLayArr[a][e].hv)gameLayArr[a][e].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[a][e]):hcheckedArr.push(gameLayArr[a][e]),i.twhBoom(gameLayArr[a][e].i,gameLayArr[a][e].j);else if("v"==gameLayArr[a][e].hv)gameLayArr[a][e].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[a][e]):hcheckedArr.push(gameLayArr[a][e]);else if(1==gameLayArr[a][e].heightLevel){gameLayArr[a][e].state="boom",rcheckArr.push(gameLayArr[a][e]),gameLayArr[a][e].arr=[],gameLayArr[a][e].arr.push(gameLayArr[a][e]);var c=Math.floor(Math.random()*(colorArr.length-.1));i.checkRainBoom(gameLayArr[a][e],colorArr[c])}else if(5==gameLayArr[a][e].heightLevel){var n=cc.instantiate(t.prototype.createTwV(o));n.heightLevel=3,n.colorId=o,n.hv="v",n.i=a,n.j=e,n.x=68*e-272,n.y=272-68*a,n.state="stand",heightLevelArr.push(n),gameLayArr[a][e].state="boom",gameLayArr[a][e].hv="v","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[a][e]):hcheckedArr.push(gameLayArr[a][e])}else gameLayArr[a][e].hv||gameLayArr[a][e].bz?gameLayArr[a][e].bz&&i.bzBoom(gameLayArr[a][e]):(gameLayArr[a][e].state="boom",gameLayArr[a][e].hv="vv","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[a][e]):hcheckedArr.push(gameLayArr[a][e]))},bzBoomCheck:function(e,r,o){if("h"==gameLayArr[e][r].hv&&"boom"!=gameLayArr[e][r].state)gameLayArr[e][r].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][r]):hcheckedArr.push(gameLayArr[e][r]),i.twhBoom(gameLayArr[e][r].i,gameLayArr[e][r].j);else if("v"==gameLayArr[e][r].hv&&"boom"!=gameLayArr[e][r].state)gameLayArr[e][r].state="boom","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][r]):hcheckedArr.push(gameLayArr[e][r]),i.twvBoom(gameLayArr[e][r].j,gameLayArr[e][r].i);else if(1==gameLayArr[e][r].heightLevel&&"boom"!=gameLayArr[e][r].state){gameLayArr[e][r].state="boom",rcheckArr.push(gameLayArr[e][r]),gameLayArr[e][r].arr=[],gameLayArr[e][r].arr.push(gameLayArr[e][r]);var a=Math.floor(Math.random()*(colorArr.length-.1));i.checkRainBoom(gameLayArr[e][r],colorArr[a])}else if(5==gameLayArr[e][r].heightLevel){if(o.fly)var c=cc.instantiate(t.prototype.createBz(o.colorId));else c=cc.instantiate(o);c.heightLevel=o.heightLevel,c.bz=o.bz,c.colorId=o.colorId,c.i=e,c.j=r,c.x=68*r-272,c.y=272-68*e,c.state="stand",heightLevelArr.push(c),gameLayArr[e][r].state="boom",gameLayArr[e][r].hv="b",6==c.heightLevel&&c.getChildByName("shining").getComponent(cc.Animation).play(),"bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][r]):hcheckedArr.push(gameLayArr[e][r])}else gameLayArr[e][r].bz?i.bzBoom(gameLayArr[e][r]):gameLayArr[e][r].hv||"boom"==gameLayArr[e][r].state||(gameLayArr[e][r].state="boom",gameLayArr[e][r].hv="b","bzboom"==i.checkState?bzcheckArr.push(gameLayArr[e][r]):hcheckedArr.push(gameLayArr[e][r]))},bzBoom:function(e){if("boom"!=e.state){if(e.state="boom","bzboom"!=i.checkState||e.fly?e.fly||hcheckedArr.push(e):bzcheckArr.push(e),2==e.heightLevel&&!e.fly){var r=cc.instantiate(t.prototype.createBz(e.colorId));r.getComponent(cc.Sprite).spriteFrame=i.smbz[e.colorId-1],r.bz=!0;var o=cc.instantiate(i.shineingPrefab);r.addChild(o),e.i==i.bzij.i&&e.j==i.bzij.j?(r.i=e.i-1,r.j=e.j,r.x=gameLayArr[e.i][e.j].x,r.y=gameLayArr[e.i][e.j].y+68):(r.i=e.i,r.j=e.j,r.x=gameLayArr[e.i][e.j].x,r.y=gameLayArr[e.i][e.j].y),r.heightLevel=6,r.round=0,r.colorId=gameLayArr[e.i][e.j].colorId,heightLevelArr.push(r),o.getComponent(cc.Animation).play()}e.i>0&&(e.j>0&&gameLayArr[e.i-1][e.j-1]&&"-100"!=gameLayArr[e.i-1][e.j-1]&&"boom"!=gameLayArr[e.i-1][e.j-1].state&&i.bzBoomCheck(e.i-1,e.j-1,e),gameLayArr[e.i-1][e.j]&&"-100"!=gameLayArr[e.i-1][e.j]&&"boom"!=gameLayArr[e.i-1][e.j].state&&i.bzBoomCheck(e.i-1,e.j,e),e.j<8&&gameLayArr[e.i-1][e.j+1]&&"-100"!=gameLayArr[e.i-1][e.j+1]&&"boom"!=gameLayArr[e.i-1][e.j+1].state&&i.bzBoomCheck(e.i-1,e.j+1,e)),e.j>0&&gameLayArr[e.i][e.j-1]&&"-100"!=gameLayArr[e.i][e.j-1]&&"boom"!=gameLayArr[e.i][e.j-1].state&&i.bzBoomCheck(e.i,e.j-1,e),e.j<8&&gameLayArr[e.i][e.j+1]&&"-100"!=gameLayArr[e.i][e.j+1]&&"boom"!=gameLayArr[e.i][e.j+1].state&&i.bzBoomCheck(e.i,e.j+1,e),e.i<8&&(e.j>0&&gameLayArr[e.i+1][e.j-1]&&"-100"!=gameLayArr[e.i+1][e.j-1]&&"boom"!=gameLayArr[e.i+1][e.j-1].state&&i.bzBoomCheck(e.i+1,e.j-1,e),gameLayArr[e.i+1][e.j]&&"-100"!=gameLayArr[e.i+1][e.j]&&"boom"!=gameLayArr[e.i+1][e.j].state&&i.bzBoomCheck(e.i+1,e.j,e),e.j<8&&gameLayArr[e.i+1][e.j+1]&&"-100"!=gameLayArr[e.i+1][e.j+1]&&"boom"!=gameLayArr[e.i+1][e.j+1].state&&i.bzBoomCheck(e.i+1,e.j+1,e))}},bzbzBoom:function(e,r){if(r){e.state="boom",r.state="boom",hcheckedArr.push(e),hcheckedArr.push(r);var o=cc.instantiate(t.prototype.createBz(e.colorId));o.getComponent(cc.Sprite).spriteFrame=i.smbz[e.colorId-1],o.bz=!0;var a=cc.instantiate(i.shineingPrefab);o.addChild(a),o.i=e.i,o.j=e.j,o.x=gameLayArr[e.i][e.j].x,o.y=gameLayArr[e.i][e.j].y,o.heightLevel=7,o.round=0,o.colorId=gameLayArr[e.i][e.j].colorId,heightLevelArr.push(o),a.getComponent(cc.Animation).play()}else e.state="boom",hcheckedArr.push(e);for(var c=-1;c<4;c++)for(var n=-1;n<4;n++)e.i+c-1>-1&&e.i+c-1<9&&e.j+n-1>-1&&e.j+n-1<9&&gameLayArr[e.i+c-1][e.j+n-1]&&"-100"!=gameLayArr[e.i+c-1][e.j+n-1]&&"boom"!=gameLayArr[e.i+c-1][e.j+n-1].state&&i.bzBoomCheck(e.i+c-1,e.j+n-1,e)},HFun:function(e,r,o){4==o.length?2!=o[0].heightLevel&&i.checkBz(o)?i.createBz():i.createTw(o):o.length>4?i.createRainBow(o):2!=o[0].heightLevel&&i.checkBz(o)&&i.createBz();for(var t=0;t<o.length;t++)"h"==o[t].hv?i.twhBoom(o[t].i,o[t].j):"v"==o[t].hv?i.twvBoom(o[t].j,o[t].i):o[t].bz?i.bzBoom(o[t]):o[t].ct||o[t].fly||"boom"!=o[t].state&&(o.length>4&&"bzboom"!=o[t].state&&(o[t].state="boom"),hcheckedArr.push(o[t]))},VFun:function(e){4==e.length?i.createTw(e):e.length>4&&i.createRainBow(e);for(var r=0;r<e.length;r++)"h"==e[r].hv?i.twhBoom(e[r].i,e[r].j):"v"==e[r].hv?i.twvBoom(e[r].j,e[r].i):e[r].bz?i.bzBoom(e[r]):e[r].ct||e[r].fly||"boom"!=e[r].state&&(e.length>4&&"bzboom"!=e[r].state&&(e[r].state="boom"),vcheckedArr.push(e[r]))},tzBoom:function(e){e.tzIndex=1,e.state="boom",tcheckedArr.push(e),"h"==e.hv?i.twhBoom(e.i,e.j):"v"==e.hv?i.twvBoom(e.j,e.i):e.bz&&i.bzBoom(e)},checkTZ:function(){tcheckedArr=[];for(var e=0;e<8;e++)for(var r=gameLayArr.length-1;r>0;r--)if(gameLayArr[r][e]&&"-100"!=gameLayArr[r][e]&&0==gameLayArr[r][e].tzIndex&&"stand"==gameLayArr[r][e].state&&6!=gameLayArr[r][e].heightLevel&&5!=gameLayArr[r][e].heightLevel&&1!=gameLayArr[r][e].heightLevel&&gameLayArr[r-1][e]&&gameLayArr[r][e+1]&&gameLayArr[r-1][e+1]&&"-100"!=gameLayArr[r-1][e]&&"-100"!=gameLayArr[r][e+1]&&"-100"!=gameLayArr[r-1][e+1]&&"stand"==gameLayArr[r-1][e].state&&"stand"==gameLayArr[r][e+1].state&&"stand"==gameLayArr[r-1][e+1].state&&6!=gameLayArr[r-1][e].heightLevel&&6!=gameLayArr[r][e+1].heightLevel&&6!=gameLayArr[r-1][e+1].heightLevel&&5!=gameLayArr[r-1][e].heightLevel&&1!=gameLayArr[r-1][e].heightLevel&&5!=gameLayArr[r][e+1].heightLevel&&1!=gameLayArr[r][e+1].heightLevel&&5!=gameLayArr[r-1][e+1].heightLevel&&1!=gameLayArr[r-1][e+1].heightLevel)for(var o=1;o<7;o++){var t=0;if(4==gameLayArr[r][e].heightLevel){for(var a=0;a<gameLayArr[r][e].colorid.length;a++)if(gameLayArr[r][e].colorid[a]==o){t++;break}}else gameLayArr[r][e].colorId==o&&t++;if(4==gameLayArr[r-1][e].heightLevel){for(a=0;a<gameLayArr[r-1][e].colorid.length;a++)if(gameLayArr[r-1][e].colorid[a]==o){t++;break}}else gameLayArr[r-1][e].colorId==o&&t++;if(4==gameLayArr[r][e+1].heightLevel){for(a=0;a<gameLayArr[r][e+1].colorid.length;a++)if(gameLayArr[r][e+1].colorid[a]==o){t++;break}}else gameLayArr[r][e+1].colorId==o&&t++;if(4==gameLayArr[r-1][e+1].heightLevel){for(a=0;a<gameLayArr[r-1][e+1].colorid.length;a++)if(gameLayArr[r-1][e+1].colorid[a]==o){t++;break}}else gameLayArr[r-1][e+1].colorId==o&&t++;if(4==t){if(i.tzBoom(gameLayArr[r][e]),i.tzBoom(gameLayArr[r-1][e]),i.tzBoom(gameLayArr[r][e+1]),i.tzBoom(gameLayArr[r-1][e+1]),r>1&&gameLayArr[r-2][e]&&"stand"==gameLayArr[r-2][e].state)if(4==gameLayArr[r-2][e].heightLevel){for(a=0;a<gameLayArr[r-2][e].colorid.length;a++)if(gameLayArr[r-2][e].colorid[a]==o){i.tzBoom(gameLayArr[r-2][e]);break}}else gameLayArr[r-2][e].colorId==o&&i.tzBoom(gameLayArr[r-2][e]);if(e<7){if(gameLayArr[r][e+2]&&"stand"==gameLayArr[r][e+2].state)if(4==gameLayArr[r][e+2].heightLevel){for(a=0;a<gameLayArr[r][e+2].colorid.length;a++)if(gameLayArr[r][e+2].colorid[a]==o){i.tzBoom(gameLayArr[r][e+2]);break}}else gameLayArr[r][e+2].colorId==o&&i.tzBoom(gameLayArr[r][e+2]);if(gameLayArr[r-1][e+2]&&"stand"==gameLayArr[r-1][e+2].state)if(4==gameLayArr[r-1][e+2].heightLevel){for(a=0;a<gameLayArr[r-1][e+2].colorid.length;a++)if(gameLayArr[r-1][e+2].colorid[a]==o){i.tzBoom(gameLayArr[r-1][e+2]);break}}else gameLayArr[r-1][e+2].colorId==o&&i.tzBoom(gameLayArr[r-1][e+2])}if(r<8&&gameLayArr[r+1][e]&&"stand"==gameLayArr[r+1][e].state)if(4==gameLayArr[r+1][e].heightLevel){for(a=0;a<gameLayArr[r+1][e].colorid.length;a++)if(gameLayArr[r+1][e].colorid[a]==o){i.tzBoom(gameLayArr[r+1][e]);break}}else gameLayArr[r+1][e].colorId==o&&i.tzBoom(gameLayArr[r+1][e]);if(e>0){if(gameLayArr[r][e-1]&&"stand"==gameLayArr[r][e-1].state)if(4==gameLayArr[r][e-1].heightLevel){for(a=0;a<gameLayArr[r][e-1].colorid.length;a++)if(gameLayArr[r][e-1].colorid[a]==o){i.tzBoom(gameLayArr[r][e-1]);break}}else gameLayArr[r][e-1].colorId==o&&i.tzBoom(gameLayArr[r][e-1]);if(gameLayArr[r-1][e-1]&&"stand"==gameLayArr[r-1][e-1].state)if(4==gameLayArr[r-1][e-1].heightLevel){for(a=0;a<gameLayArr[r-1][e-1].colorid.length;a++)if(gameLayArr[r-1][e-1].colorid[a]==o){i.tzBoom(gameLayArr[r-1][e-1]);break}}else gameLayArr[r-1][e-1].colorId==o&&i.tzBoom(gameLayArr[r-1][e-1])}return i.createClone(tcheckedArr,gameLayArr[r][e]),!0}}return!1},checkBzBz:function(){bzcheckArr=[],i.checkState="bzboom";for(var e=gameLayArr.length-1;e>-1;e--)for(var r=0;r<gameLayArr[e].length;r++)gameLayArr[e][r]&&(6==gameLayArr[e][r].heightLevel?i.BZFun(gameLayArr[e][r]):7==gameLayArr[e][r].heightLevel&&i.bzbzBoom(gameLayArr[e][r]))},BZFun:function(e){"boom"!=e.state&&(e.state="boom",bzcheckArr.push(e),e.i>0&&(e.j>0&&gameLayArr[e.i-1][e.j-1]&&"-100"!=gameLayArr[e.i-1][e.j-1]&&"boom"!=gameLayArr[e.i-1][e.j-1].state&&i.bzBoomCheck(e.i-1,e.j-1,e,e),gameLayArr[e.i-1][e.j]&&"-100"!=gameLayArr[e.i-1][e.j]&&"boom"!=gameLayArr[e.i-1][e.j].state&&i.bzBoomCheck(e.i-1,e.j,e),e.j<8&&gameLayArr[e.i-1][e.j+1]&&"-100"!=gameLayArr[e.i-1][e.j+1]&&"boom"!=gameLayArr[e.i-1][e.j+1].state&&i.bzBoomCheck(e.i-1,e.j+1,e)),e.j>0&&gameLayArr[e.i][e.j-1]&&"-100"!=gameLayArr[e.i][e.j-1]&&"boom"!=gameLayArr[e.i][e.j-1].state&&i.bzBoomCheck(e.i,e.j-1,e),e.j<8&&gameLayArr[e.i][e.j+1]&&"-100"!=gameLayArr[e.i][e.j+1]&&"boom"!=gameLayArr[e.i][e.j+1].state&&i.bzBoomCheck(e.i,e.j+1,e),e.i<8&&(e.j>0&&gameLayArr[e.i+1][e.j-1]&&"-100"!=gameLayArr[e.i+1][e.j-1]&&"boom"!=gameLayArr[e.i+1][e.j-1].state&&i.bzBoomCheck(e.i+1,e.j-1,e),gameLayArr[e.i+1][e.j]&&"-100"!=gameLayArr[e.i+1][e.j]&&"boom"!=gameLayArr[e.i+1][e.j].state&&i.bzBoomCheck(e.i+1,e.j,e),e.j<8&&gameLayArr[e.i+1][e.j+1]&&"-100"!=gameLayArr[e.i+1][e.j+1]&&"boom"!=gameLayArr[e.i+1][e.j+1].state&&i.bzBoomCheck(e.i+1,e.j+1,e)))},checkH:function(e){i.checkState="baseboom",i.bzij.i=-1,i.bzij.j=-1;for(var r=0,o=[],t=[],a=gameLayArr.length-1;a>-1;a--){for(var c=0;c<gameLayArr[a].length;c++)if(gameLayArr[a][c]&&gameLayArr[a][c+1]&&"-100"!=gameLayArr[a][c]&&"-100"!=gameLayArr[a][c+1]&&1!=gameLayArr[a][c].heightLevel&&5!=gameLayArr[a][c].heightLevel&&1!=gameLayArr[a][c+1].heightLevel&&5!=gameLayArr[a][c+1].heightLevel)if("boom"!=gameLayArr[a][c].state&&"boom"!=gameLayArr[a][c+1].state){if(7==c)var n=i.checkResult(gameLayArr[a][c],gameLayArr[a][c+1],null,t,r,c,7,o);else if("-100"!=gameLayArr[a][c+2])n=i.checkResult(gameLayArr[a][c],gameLayArr[a][c+1],gameLayArr[a][c+2],t,r,c,7,o);else n=i.checkResult(gameLayArr[a][c],gameLayArr[a][c+1],null,t,r,c,7,o);o=n[0],r=n[1],t=n[2],o.length?n[3]&&(i.HFun(a,c,o),o=[],r=0,t=[]):(o=[],r=0,t=[])}else 1==gameLayArr[a][c+1].heightLevel?(r++,o.push(gameLayArr[a][c]),r>=3?i.HFun(a,c,o):(o=[],r=0,t=[])):5==gameLayArr[a][c+1].heightLevel&&(o=[],r=0,t=[]);else o=[],r=0,t=[];o=[],r=0,t=[]}e&&i.checkV()},checkV:function(){for(var e=0,r=[],o=[],t=0;t<9;t++){for(var a=gameLayArr.length-1;a>0;a--)if(gameLayArr[a][t]&&gameLayArr[a-1][t]&&"-100"!=gameLayArr[a][t]&&"-100"!=gameLayArr[a-1][t]&&1!=gameLayArr[a][t].heightLevel&&5!=gameLayArr[a][t].heightLevel&&1!=gameLayArr[a-1][t].heightLevel&&5!=gameLayArr[a-1][t].heightLevel)if("boom"!=gameLayArr[a][t].state&&"boom"!=gameLayArr[a-1][t].state){if(1==a)var c=i.checkResult(gameLayArr[a][t],gameLayArr[a-1][t],null,o,e,a,1,r);else c=i.checkResult(gameLayArr[a][t],gameLayArr[a-1][t],gameLayArr[a-2][t],o,e,a,1,r);e=c[1],r=c[0],o=c[2],r.length?c[3]&&(i.VFun(r),r=[],e=0,o=[]):(r=[],e=0,o=[])}else 1==gameLayArr[a-1][t].heightLevel?(e++,r.push(gameLayArr[a][t]),e>=3?i.VFun(r):(e=0,r=[])):5==gameLayArr[a-1][t].heightLevel&&(e=0,r=[]);else e=0,r=[];r=[],e=0}},checkColor:function(){for(var e=0,r=[],o=0,t=[],a=[],c=gameLayArr.length-1;c>-1;c--){for(var n=0;n<gameLayArr[c].length;n++)if(gameLayArr[c][n]&&gameLayArr[c][n+1]&&"-100"!=gameLayArr[c][n]&&"-100"!=gameLayArr[c][n+1]&&1!=gameLayArr[c][n].heightLevel&&5!=gameLayArr[c][n].heightLevel&&1!=gameLayArr[c][n+1].heightLevel&&5!=gameLayArr[c][n+1].heightLevel){if("boom"!=gameLayArr[c][n].state&&"boom"!=gameLayArr[c][n+1].state){if(7==n)var h=i.checkResult(gameLayArr[c][n],gameLayArr[c][n+1],null,a,e,n,7,r);else h=i.checkResult(gameLayArr[c][n],gameLayArr[c][n+1],gameLayArr[c][n+2],a,e,n,7,r);r=h[0],e=h[1],a=h[2],r.length?h[3]&&(r.length>4&&i.HFun(c,n,r),r=[],e=0,a=[]):(r=[],e=0,a=[])}}else r=[],e=0,a=[];r=[],e=0,a=[]}for(n=0;n<9;n++){for(c=gameLayArr.length-1;c>0;c--)if(gameLayArr[c][n]&&gameLayArr[c-1][n]&&"-100"!=gameLayArr[c][n]&&"-100"!=gameLayArr[c-1][n]&&1!=gameLayArr[c][n].heightLevel&&5!=gameLayArr[c][n].heightLevel&&1!=gameLayArr[c-1][n].heightLevel&&5!=gameLayArr[c-1][n].heightLevel){if("boom"!=gameLayArr[c][n].state&&"boom"!=gameLayArr[c-1][n].state){if(1==c)h=i.checkResult(gameLayArr[c][n],gameLayArr[c-1][n],null,a,o,c,1,t);else h=i.checkResult(gameLayArr[c][n],gameLayArr[c-1][n],gameLayArr[c-2][n],a,o,c,1,t);o=h[1],t=h[0],a=h[2],t.length?h[3]&&(t.length>4&&i.VFun(t),t=[],o=0,a=[]):(t=[],o=0,a=[])}}else o=0,t=[];t=[],o=0}},createRainBow:function(e){for(var r=0;r<heightLevelArr.length;r++)1!=heightLevelArr[r].heightLevel&&(heightLevelArr.splice(r,1),r--);for(r=0;r<e.length;r++)if(!e[r].heightLevel)if("h"==e[r].hv&&"boom"!=e[r].state)e[r].state="boom",hcheckedArr.push(e[r]),i.twhBoom(e[r].i,e[r].j);else if("v"==e[r].hv&&"boom"!=e[r].state)e[r].state="boom",hcheckedArr.push(e[r]),i.twvBoom(e[r].j,e[r].i);else if(e[r].bz&&"boom"!=e[r].state){(a=cc.instantiate(t.prototype.createBz(e[r].colorId))).bz=!0,a.i=e[r].i,a.j=e[r].j,a.x=e[r].x,a.y=e[r].y,a.heightLevel=6,a.round=0,a.colorId=e[r].colorId,heightLevelArr.push(a),e[r].i>0&&(e[r].j>0&&gameLayArr[e[r].i-1][e[r].j-1]&&"-100"!=gameLayArr[e[r].i-1][e[r].j-1]&&"boom"!=gameLayArr[e[r].i-1][e[r].j-1].state&&i.bzBoomCheck(e[r].i-1,e[r].j-1,e[r]),gameLayArr[e[r].i-1][e[r].j]&&"-100"!=gameLayArr[e[r].i-1][e[r].j]&&"boom"!=gameLayArr[e[r].i-1][e[r].j].state&&i.bzBoomCheck(e[r].i-1,e[r].j,e[r]),e[r].j<8&&gameLayArr[e[r].i-1][e[r].j+1]&&"-100"!=gameLayArr[e[r].i-1][e[r].j+1]&&"boom"!=gameLayArr[e[r].i-1][e[r].j+1].state&&i.bzBoomCheck(e[r].i-1,e[r].j+1,e[r])),e[r].j>0&&gameLayArr[e[r].i][e[r].j-1]&&"-100"!=gameLayArr[e[r].i][e[r].j-1]&&"boom"!=gameLayArr[e[r].i][e[r].j-1].state&&i.bzBoomCheck(e[r].i,e[r].j-1,e[r]),e[r].j<8&&gameLayArr[e[r].i][e[r].j+1]&&"-100"!=gameLayArr[e[r].i][e[r].j+1]&&"boom"!=gameLayArr[e[r].i][e[r].j+1].state&&i.bzBoomCheck(e[r].i,e[r].j+1,e[r]),e[r].i<8&&(e[r].j>0&&gameLayArr[e[r].i+1][e[r].j-1]&&"-100"!=gameLayArr[e[r].i+1][e[r].j-1]&&"boom"!=gameLayArr[e[r].i+1][e[r].j-1].state&&i.bzBoomCheck(e[r].i+1,e[r].j-1,e[r]),gameLayArr[e[r].i+1][e[r].j]&&"-100"!=gameLayArr[e[r].i+1][e[r].j]&&"boom"!=gameLayArr[e[r].i+1][e[r].j].state&&i.bzBoomCheck(e[r].i+1,e[r].j,e[r]),e[r].j<8&&gameLayArr[e[r].i+1][e[r].j+1]&&"-100"!=gameLayArr[e[r].i+1][e[r].j+1]&&"boom"!=gameLayArr[e[r].i+1][e[r].j+1].state&&i.bzBoomCheck(e[r].i+1,e[r].j+1,e[r]))}for(r=0;r<gameLayArr.length;r++)for(var o=0;o<gameLayArr[r].length;o++)gameLayArr[r][o]&&"-100"!=gameLayArr[r][o]&&"boom"!=gameLayArr[r][o].state&&(gameLayArr[r][o].state="stand");var a=cc.instantiate(t.prototype.createRainBow());if(moveEdNode)for(var c=0;c<e.length;c++){if(moveEdNode==e[c]){2==moveEdNode.heightLevel?(a.i=moveEdNode.i-1,a.j=moveEdNode.j,a.x=68*a.j-272,a.y=272-68*a.i):(a.i=moveEdNode.i,a.j=moveEdNode.j,a.x=68*a.j-272,a.y=272-68*a.i),a.heightLevel=1,a.round=0,heightLevelArr.push(a);break}if(otherMovedNode==e[c]){2==otherMovedNode.heightLevel?(a.i=otherMovedNode.i-1,a.j=otherMovedNode.j,a.x=68*a.j-272,a.y=272-68*a.i):(a.i=otherMovedNode.i,a.j=otherMovedNode.j,a.x=68*a.j-272,a.y=272-68*a.i),a.heightLevel=1,a.round=0,heightLevelArr.push(a);break}}else 2==e[0].heightLevel?(a.i=e[0].i-1,a.j=e[0].j,a.x=68*a.j-272,a.y=272-68*a.i):(a.i=e[0].i,a.j=e[0].j,a.x=68*a.j-272,a.y=272-68*a.i),a.heightLevel=1,a.round=0,heightLevelArr.push(a);for(r=0;r<e.length;r++)2!=e[r].heightLevel&&(e[r].heightNodePX=a.x,e[r].heightNodePY=a.y)},createTw:function(e){for(var r=0;r<e.length;r++){if("boom"==e[r].state||"bzboom"==e[r].state||"twboom"==e[r].state)return;e[r].state="twboom"}var o=null;if(moveEdNode)for(var a=0;a<e.length;a++){if(moveEdNode==e[a]){4==moveEdNode.heightLevel&&void 0===moveEdNode.colorId?(moveEdNode.round?(o=cc.instantiate(t.prototype.createTwH(moveEdNode.colorid[0]))).hv="h":(o=cc.instantiate(t.prototype.createTwV(moveEdNode.colorid[0]))).hv="v",o.colorId=moveEdNode.colorid[0]):(moveEdNode.round?(o=cc.instantiate(t.prototype.createTwH(moveEdNode.colorId))).hv="h":(o=cc.instantiate(t.prototype.createTwV(moveEdNode.colorId))).hv="v",o.colorId=e[a].colorId),2==moveEdNode.heightLevel?(o.i=moveEdNode.i-1,o.j=moveEdNode.j,o.x=68*o.j-272,o.y=272-68*o.i):(o.i=moveEdNode.i,o.j=moveEdNode.j,o.x=68*o.j-272,o.y=272-68*o.i),o.heightLevel=3,o.round=moveEdNode.round,o.roundb=moveEdNode.round,heightLevelArr.push(o);break}if(otherMovedNode==e[a]){4==otherMovedNode.heightLevel&&void 0===otherMovedNode.colorId?(otherMovedNode.round?(o=cc.instantiate(t.prototype.createTwH(otherMovedNode.colorid[0]))).hv="h":(o=cc.instantiate(t.prototype.createTwV(otherMovedNode.colorid[0]))).hv="v",o.colorId=otherMovedNode.colorid[0]):(otherMovedNode.round?(o=cc.instantiate(t.prototype.createTwH(otherMovedNode.colorId))).hv="h":(o=cc.instantiate(t.prototype.createTwV(otherMovedNode.colorId))).hv="v",o.colorId=otherMovedNode.colorId),2==otherMovedNode.heightLevel?(o.i=otherMovedNode.i-1,o.j=otherMovedNode.j,o.x=68*o.j-272,o.y=272-68*o.i):(o.i=otherMovedNode.i,o.j=otherMovedNode.j,o.x=68*o.j-272,o.y=272-68*o.i),o.heightLevel=3,o.round=otherMovedNode.round,o.roundb=otherMovedNode.round,heightLevelArr.push(o);break}}else 4==e[0].heightLevel&&void 0===e[0].colorId?(o=cc.instantiate(t.prototype.createTwV(e[0].colorid[0]))).colorId=e[0].colorid[0]:(o=cc.instantiate(t.prototype.createTwV(e[0].colorId))).colorId=e[0].colorId,o.hv="v",2==e[0].heightLevel?(o.i=e[0].i-1,o.j=e[0].j,o.x=68*o.j-272,o.y=272-68*o.i):(o.i=e[0].i,o.j=e[0].j,o.x=68*o.j-272,o.y=272-68*o.i),o.heightLevel=3,o.round=0,o.roundb=0,heightLevelArr.push(o);if(o)for(r=0;r<e.length;r++)2!=e[r].heightLevel&&(e[r].heightNodePX=o.x,e[r].heightNodePY=o.y);else{4==e[0].heightLevel&&void 0===e[0].colorId?(o=cc.instantiate(t.prototype.createTwV(e[0].colorid[0]))).colorId=e[0].colorid[0]:(o=cc.instantiate(t.prototype.createTwV(e[0].colorId))).colorId=e[0].colorId,o.hv="v",2==e[0].heightLevel?(o.i=e[0].i-1,o.j=e[0].j,o.x=68*o.j-272,o.y=272-68*o.i):(o.i=e[0].i,o.j=e[0].j,o.x=68*o.j-272,o.y=272-68*o.i),o.heightLevel=3,o.round=0,o.roundb=0,heightLevelArr.push(o);for(r=0;r<e.length;r++)2!=e[r].heightLevel&&(e[r].heightNodePX=o.x,e[r].heightNodePY=o.y)}},createBz:function(){if(-1!=i.bzij.i&&-1!=i.bzij.j){var e;if(4==gameLayArr[i.bzij.i][i.bzij.j].heightLevel&&void 0===gameLayArr[i.bzij.i][i.bzij.j])(e=cc.instantiate(t.prototype.createBz(gameLayArr[i.bzij.i][i.bzij.j].colorid[0]))).colorId=gameLayArr[i.bzij.i][i.bzij.j].colorid[0];else(e=cc.instantiate(t.prototype.createBz(gameLayArr[i.bzij.i][i.bzij.j].colorId))).colorId=gameLayArr[i.bzij.i][i.bzij.j].colorId;e.bz=!0,e.i=i.bzij.i,e.j=i.bzij.j,e.x=68*e.j-272,e.y=272-68*e.i,e.heightLevel=2,e.round=0,heightLevelArr.push(e),i.bzij.i=-1,i.bzij.j=-1;for(var r=0;r<i.bzNodeArr.length;r++)2!=i.bzNodeArr[r].heightLevel&&(i.bzNodeArr[r].heightNodePX=e.x,i.bzNodeArr[r].heightNodePY=e.y);i.bzNodeArr=[]}},checkBz:function(e){var r=0;i.bzNodeArr=e;for(var o=0;o<e.length;o++){for(var t=1;t<9-e[o].i&&gameLayArr[e[o].i+t][e[o].j]&&(gameLayArr[e[o].i+t][e[o].j].colorId==gameLayArr[e[o].i][e[o].j].colorId&&"boom"!=gameLayArr[e[o].i+t][e[o].j].state&&"bzboom"!=gameLayArr[e[o].i+t][e[o].j].state&&5!=gameLayArr[e[o].i+t][e[o].j].heightLevel);t++)r++;for(t=1;t<e[o].i+1&&gameLayArr[e[o].i-t][e[o].j]&&(gameLayArr[e[o].i-t][e[o].j].colorId==gameLayArr[e[o].i][e[o].j].colorId&&"boom"!=gameLayArr[e[o].i-t][e[o].j].state&&"bzboom"!=gameLayArr[e[o].i-t][e[o].j].state&&5!=gameLayArr[e[o].i-t][e[o].j].heightLevel);t++)r++;if(r>1&&r<4){for(t=0;t<e.length;t++)e[t].state="bzboom";for(t=1;t<9-e[o].i&&gameLayArr[e[o].i+t][e[o].j]&&gameLayArr[e[o].i+t][e[o].j].colorId==gameLayArr[e[o].i][e[o].j].colorId;t++)"boom"!=gameLayArr[e[o].i+t][e[o].j].state&&"bzboom"!=gameLayArr[e[o].i+t][e[o].j].state&&(gameLayArr[e[o].i+t][e[o].j].state="bzboom",hcheckedArr.push(gameLayArr[e[o].i+t][e[o].j]),i.bzNodeArr.push(gameLayArr[e[o].i+t][e[o].j]));for(t=1;t<e[o].i+1&&gameLayArr[e[o].i-t][e[o].j]&&gameLayArr[e[o].i-t][e[o].j].colorId==gameLayArr[e[o].i][e[o].j].colorId;t++)"boom"!=gameLayArr[e[o].i-t][e[o].j].state&&"bzboom"!=gameLayArr[e[o].i-t][e[o].j].state&&(gameLayArr[e[o].i-t][e[o].j].state="bzboom",hcheckedArr.push(gameLayArr[e[o].i-t][e[o].j]),i.bzNodeArr.push(gameLayArr[e[o].i-t][e[o].j]));return 2==e[o].heightLevel?(i.bzij.i=e[o].i-1,i.bzij.j=e[o].j):(i.bzij.i=e[o].i,i.bzij.j=e[o].j),!0}if(r>=4)return r=0,i.bzNodeArr=[],!1;r=0}return i.bzNodeArr=[],!1},createClone:function(e,r){var o=cc.instantiate(i.fzBlock);if(moveEdNode)if(5!=moveEdNode.heightLevel)for(var t=0;t<e.length;t++){if(e[t]==moveEdNode){2==moveEdNode.heightLevel?(o.i=moveEdNode.i-1,o.j=moveEdNode.j,o.x=68*o.j-272,o.y=272-68*o.i):(o.i=moveEdNode.i,o.j=moveEdNode.j,o.x=68*o.j-272,o.y=272-68*o.i),o.heightLevel=5,o.round=0,heightLevelArr.push(o);break}if(e[t]==otherMovedNode){2==otherMovedNode.heightLevel?(o.i=otherMovedNode.i-1,o.j=otherMovedNode.j,o.x=68*o.j-272,o.y=272-68*o.i):(o.i=otherMovedNode.i,o.j=otherMovedNode.j,o.x=68*o.j-272,o.y=272-68*o.i),o.heightLevel=5,o.round=0,heightLevelArr.push(o);break}}else 2==moveEdNode.heightLevel?(o.i=moveEdNode.i-1,o.j=moveEdNode.j,o.x=68*o.j-272,o.y=272-68*o.i):(o.i=moveEdNode.i,o.j=moveEdNode.j,o.x=68*o.j-272,o.y=272-68*o.i),o.heightLevel=5,o.round=0,heightLevelArr.push(o);else 2==r.heightLevel?(o.i=r.i-1,o.j=r.j,o.x=68*o.j-272,o.y=272-68*o.i):(o.i=r.i,o.j=r.j,o.x=68*o.j-272,o.y=272-68*o.i),o.heightLevel=5,o.round=0,heightLevelArr.push(o);for(t=0;t<e.length;t++)e[t].heightLevel&&(e[t].heightNodePX=o.x,e[t].heightNodePY=o.y)},checkRainBoom:function(e,r,o){for(var t=0;t<gameLayArr.length;t++)for(var a=0;a<gameLayArr[t].length;a++)if(gameLayArr[t][a]&&"-100"!=gameLayArr[t][a]&&gameLayArr[t][a].colorId==r)if(o){if("bz"==o)gameLayArr[t][a].getComponent(cc.Sprite).spriteFrame=i.bzSp[gameLayArr[t][a].colorId-1],gameLayArr[t][a].heightLevel=2,gameLayArr[t][a].bz=!0;else if("tw"==o){var n=Math.random(),h=cc.instantiate(i.twBoom);gameLayArr[t][a].addChild(h),n>.5?(gameLayArr[t][a].getComponent(cc.Sprite).spriteFrame=i.twhSp[gameLayArr[t][a].colorId-1],gameLayArr[t][a].heightLevel=3,gameLayArr[t][a].hv="h"):(gameLayArr[t][a].getComponent(cc.Sprite).spriteFrame=i.twvSp[gameLayArr[t][a].colorId-1],gameLayArr[t][a].heightLevel=3,gameLayArr[t][a].hv="v")}e.arr.push(gameLayArr[t][a])}else 2!=gameLayArr[t][a].heightLevel&&(gameLayArr[t][a].state="boom"),gameLayArr[t][a].heightLevel||(gameLayArr[t][a].heightLevel=5),e.arr.push(gameLayArr[t][a]);setTimeout(function(r){if(r)if("bz"==r)for(var o=0;o<gameLayArr.length;o++)for(var t=0;t<gameLayArr[o].length;t++)gameLayArr[o][t]&&"-100"!=gameLayArr[o][t]&&gameLayArr[o][t].bz&&"boom"!=gameLayArr[o][t].state&&(i.bzBoom(gameLayArr[o][t]),e.arr.push(gameLayArr[o][t]));else for(o=0;o<gameLayArr.length;o++)for(t=0;t<gameLayArr[o].length;t++)gameLayArr[o][t]&&"-100"!=gameLayArr[o][t]&&("h"==gameLayArr[o][t].hv&&"boom"!=gameLayArr[o][t].state?(gameLayArr[o][t].state="boom",e.arr.push(gameLayArr[o][t]),i.twhBoom(gameLayArr[o][t].i,gameLayArr[o][t].j)):"v"==gameLayArr[o][t].hv&&"boom"!=gameLayArr[o][t].state?(gameLayArr[o][t].state="boom",e.arr.push(gameLayArr[o][t]),i.twvBoom(gameLayArr[o][t].j,gameLayArr[o][t].i)):gameLayArr[o][t].bz&&"boom"!=gameLayArr[o][t]&&(gameLayArr[o][t].state="boom",e.arr.push(gameLayArr[o][t]),i.bzBoom(gameLayArr[o][t])));c.prototype.nullArrFun();for(o=0;o<e.arr.length;o++)if("color"!=e.arr[o].name){e.arr[o].bz?i.bzBoom(e.arr[o]):"h"==e.arr[o].hv?i.twhBoom(e.arr[o].i,e.arr[o].j):"v"==e.arr[o].hv&&i.twvBoom(e.arr[o].j,e.arr[o].i);var a=68*e.arr[0].j-272,n=272-68*e.arr[0].i,h=68*e.arr[o].j-272,d=272-68*e.arr[o].i;c.prototype.createline(a,n,h,d)}},200,o)},cloneBoom:function(e,r){var o=cc.instantiate(e);return e.colorid?(o.colorid=[],o.colorid[0]=e.colorid[0],o.colorid[1]=e.colorid[1]):o.colorId=e.colorId,o.i=r.i,o.j=r.j,o.x=r.x,o.y=r.y,o.tzIndex=0,o.state="stand",e.hv&&(o.hv=e.hv),e.bz&&(o.bz=e.bz),o.heightLevel=e.heightLevel,o.round=e.round,o.des=!1,gameLayArr[o.i][o.j]=o,r.destroy(),o},checkRainBoomAll:function(){for(var e=0;e<gameLayArr.length;e++)for(var r=0;r<gameLayArr[e].length;r++)if(gameLayArr[e][r]&&"-100"!=gameLayArr[e][r]&&"boom"!=gameLayArr[e][r].state){if(gameLayArr[e][r].state="boom",5==gameLayArr[e][r].heightLevel){var o=cc.instantiate(i.colorPrefab);o.heightLevel=1,o.des=!1,o.tzIndex=0,o.hv="",o.round=0,o.heightNodePX=null,o.heightNodePY=null,o.animNum=0,o.colorId=0,o.i=e,o.j=r,o.x=68*r-272,o.y=272-68*e,heightLevelArr.push(o);var t=cc.repeatForever(cc.rotateBy(5,120));o.runAction(t)}hcheckedArr.push(gameLayArr[e][r])}cc.xx.gameJS.destroyNode()},checkRainFly:function(e,r,o,t){c.prototype.nullArrFun();for(var i=0;i<gameLayArr.length;i++)for(var n=0;n<gameLayArr[i].length;n++)if(gameLayArr[i][n]&&"-100"!=gameLayArr[i][n])if(gameLayArr[i][n].colorId==e){a.prototype.createFly(gameLayArr[i][n],gameLayArr[i][n].colorId),gameLayArr[i][n].state="boom",hcheckedArr.push(gameLayArr[i][n]);var h=68*t-272,d=272-68*o,l=68*gameLayArr[i][n].j-272,m=272-68*gameLayArr[i][n].i;c.prototype.createline(h,d,l,m)}else if(gameLayArr[i][n].colorId==r){a.prototype.createFly(gameLayArr[i][n],gameLayArr[i][n].colorId),gameLayArr[i][n].state="boom",hcheckedArr.push(gameLayArr[i][n]);h=68*t-272,d=272-68*o,l=68*gameLayArr[i][n].j-272,m=272-68*gameLayArr[i][n].i;c.prototype.createline(h,d,l,m)}setTimeout(function(){cc.xx.gameJS.destroyNode()},200)},checkResult:function(e,r,o,t,a,c,i,n){var h=n;h.length||(4==e.heightLevel?t=e.colorid:t[0]=e.colorId);for(var d=!1,l=!1,m=0;m<t.length;m++)if(4==r.heightLevel){for(var g=0;g<r.colorid.length;g++)if(t[m]==r.colorid[g])if(d=!0,t[0]==r.colorid[0]||t[0]==r.colorid[1]||t[1]==r.colorid[0]||t[1]==r.colorid[1]){if(!l){if(l=!0,a++,h.push(e),c==i)return a++,h.push(r),s=a>=3?[h,a,t,!0]:[h=[],a=0,t=[],!0];if(!o)return null==o&&a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0];if(4==o.heightLevel){if(1==t.length){if(o.colorid[0]!=t[0]&&o.colorid[1]!=t[0])return a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0]}else if(o.colorid[0]!=t[0]&&o.colorid[1]!=t[0]&&o.colorid[0]!=t[1]&&o.colorid[1]!=t[1])return a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0]}else if(o.colorId!=t[0]&&o.colorId!=t[1])return a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0]}}else{if((t=[])[0]=r.colorid[g],e.colorId=t[0],r.colorId=e.colorId,a++,h.push(e),c==i)return a++,h.push(r),s=a>=3?[h,a,t,!0]:[h=[],a=0,t=[],!0];if(!o)return null==o&&a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0];if(4==o.heightLevel){if(1==t.length){if(o.colorid[0]!=t[0]&&o.colorid[1]!=t[0])return a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0]}else if(o.colorid[0]!=t[0]&&o.colorid[1]!=t[0]&&o.colorid[0]!=t[1]&&o.colorid[1]!=t[1])return a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0]}else if(o.colorId!=t[0]&&o.colorId!=t[1])return a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0]}}else if(t[m]==r.colorId){if(d=!0,(t=[])[0]=r.colorId,e.colorId=t[0],a++,h.push(e),c==i)return a++,h.push(r),s=a>=3?[h,a,t,!0]:[h=[],a=0,t=[],!0];if(!o)return null==o&&a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0];if(4==o.heightLevel){if(o.colorid[0]!=t[0]&&o.colorid[1]!=t[0])return a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0]}else if(1==t.length){if(o.colorId!=t[0])return a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0]}else if(o.colorId!=t[0]&&o.colorId!=t[1])return a>=2?(a++,h.push(r),s=[h,a,t,!0]):s=[h=[],a=0,t=[],!0]}if(d)var s=[h,a,t,!1];else s=[h=[],a=0,t=[],!0];return s}}),cc._RF.pop()},{butterFly:"butterFly",heightLevelNode:"heightLevelNode",shootLine:"shootLine"}],checkGame:[function(e,r,o){"use strict";cc._RF.push(r,"65496wHnhhLFpIXn2tiuyjY","checkGame");var t=null;cc.Class({extends:cc.Component,properties:{},onLoad:function(){(t=this).timers=0},timersReset:function(){t.timers=0},checkTZ:function(){for(var e=0;e<8;e++)for(var r=t.tempArr.length-1;r>1;r--)if(t.tempArr[r][e]&&"-100"!=t.tempArr[r][e]&&0==t.tempArr[r][e].tzIndex&&"stand"==t.tempArr[r][e].state&&t.tempArr[r-1][e]&&t.tempArr[r][e+1]&&t.tempArr[r-1][e+1]&&"-100"!=t.tempArr[r-1][e]&&"-100"!=t.tempArr[r][e+1]&&"-100"!=t.tempArr[r-1][e+1]&&"stand"==t.tempArr[r-1][e].state&&"stand"==t.tempArr[r][e+1].state&&"stand"==t.tempArr[r-1][e+1].state&&t.tempArr[r][e].colorId==t.tempArr[r-1][e].colorId&&t.tempArr[r][e].colorId==t.tempArr[r][e+1].colorId&&t.tempArr[r][e].colorId==t.tempArr[r-1][e+1].colorId)return!1;return!0},checkH:function(){for(var e=0,r=[],o=[],a=t.tempArr.length-1;a>-1;a--){for(var c=0;c<t.tempArr[a].length;c++)if(t.tempArr[a][c]&&t.tempArr[a][c+1]&&"-100"!=t.tempArr[a][c]&&"-100"!=t.tempArr[a][c+1])if("boom"!=t.tempArr[a][c].state&&"boom"!=t.tempArr[a][c+1].state){var i=t.checkResult(t.tempArr[a][c],t.tempArr[a][c+1],t.tempArr[a][c+2],o,e,c,7,r);if(r=i[0],e=i[1],o=i[2],r.length){if(i[3])return!1}else r=[],e=0,o=[]}else{if(1==t.tempArr[a][c+1].heightLevel)return!1;if(5==t.tempArr[a][c+1].heightLevel)return!1}else r=[],e=0,o=[];r=[],e=0,o=[]}return!0},checkV:function(){for(var e=0,r=[],o=[],a=0;a<9;a++){for(var c=t.tempArr.length-1;c>0;c--)if(t.tempArr[c][a]&&t.tempArr[c-1][a]&&"-100"!=t.tempArr[c][a]&&"-100"!=t.tempArr[c][a-1])if("boom"!=t.tempArr[c][a].state&&"boom"!=t.tempArr[c-1][a].state){if(1==c)var i=t.checkResult(t.tempArr[c][a],t.tempArr[c-1][a],null,o,e,c,1,r);else i=t.checkResult(t.tempArr[c][a],t.tempArr[c-1][a],t.tempArr[c-2][a],o,e,c,1,r);if(e=i[1],r=i[0],o=i[2],r.length){if(i[3])return!1}else r=[],e=0,o=[]}else{if(1==t.tempArr[c-1][a].heightLevel)return!1;if(5==t.tempArr[c-1][a].heightLevel)return!1}else e=0,r=[];r=[],e=0}return!0},exchangCheckArrFun:function(e){if(cc.xx.gameJS.checkEnd()&&t.timers>0)return!1;if(t.timers++,5==t.timers)return cc.xx.gameJS.failResultFun(),!0;t.tempArr=e;for(var r=0;r<t.tempArr.length;r++)for(var o=0;o<t.tempArr[r].length-1;o++)if(t.tempArr[r][o]&&t.tempArr[r][o+1]&&"-100"!=t.tempArr[r][o+1]&&"-100"!=t.tempArr[r][o]){if(1==t.tempArr[r][o].heightLevel||5==t.tempArr[r][o].heightLevel||t.tempArr[r][o].heightLevel&&t.tempArr[r][o+1].heightLevel)return t.timers>1&&t.changeLay(),!1;var a=t.tempArr[r][o];t.tempArr[r][o]=t.tempArr[r][o+1],t.tempArr[r][o+1]=a;var c=t.checkH(),i=t.checkV(),n=t.checkTZ();if(!c||!i||!n)return t.tempArr[r][o+1]=t.tempArr[r][o],t.tempArr[r][o]=a,t.timers>1&&t.changeLay(),!1;t.tempArr[r][o+1]=t.tempArr[r][o],t.tempArr[r][o]=a}for(var h=0;h<8;h++)for(var d=0;d<9;d++)if(t.tempArr[h][d]&&t.tempArr[h+1][d]&&"-100"!=t.tempArr[h+1][d]&&"-100"!=t.tempArr[h][d]){var l=t.tempArr[h][d];t.tempArr[h][d]=t.tempArr[h+1][d],t.tempArr[h+1][d]=l;c=t.checkH(),i=t.checkV(),n=t.checkTZ();if(!c||!i||!n)return t.tempArr[h+1][d]=t.tempArr[h][d],t.tempArr[h][d]=l,t.timers>1&&t.changeLay(),!1;t.tempArr[h+1][d]=t.tempArr[h][d],t.tempArr[h][d]=l}t.tempArr=[];for(r=0;r<e.length;r++)for(o=0;o<e[r].length;o++)e[r][o]&&"-100"!=e[r][o]&&t.tempArr.push(e[r][o]);for(r=0;r<e.length;r++)for(o=0;o<e[r].length;o++)if(e[r][o]&&"-100"!=e[r][o]&&t.tempArr.length){var m=Math.floor(Math.random()*(t.tempArr.length-.01));e[r][o]=t.tempArr[m],e[r][o].i=r,e[r][o].j=o,t.tempArr.splice(m,1)}cc.xx.gameJS.checkConnected()?t.changeLay():t.exchangCheckArrFun(e)},changeLay:function(){for(var e=null,r=0;r<gameLayArr.length;r++)for(var o=0;o<gameLayArr[r].length;o++){var t,a;if(gameLayArr[r][o]&&"-100"!=gameLayArr[r][o])(function(){var c=r,i=o;t=cc.callFunc(function(){gameLayArr[c][i].x=68*gameLayArr[c][i].j-272,gameLayArr[c][i].y=272-68*gameLayArr[c][i].i},c,i),e?a=cc.sequence(cc.scaleTo(.2,0,0),t,cc.scaleTo(.2,1,1)):(e=cc.callFunc(function(){cc.xx.gameJS.destroyNode()}),a=cc.sequence(cc.scaleTo(.2,0,0),t,cc.scaleTo(.2,1,1),e)),gameLayArr[r][o].runAction(a)})()}},checkResult:function(e,r,o,t,a,c,i,n){var h=n;h.length||(4==e.heightLevel?t=e.colorid:t[0]=e.colorId);for(var d=!1,l=0;l<t.length;l++)if(4==r.heightLevel){for(var m=0;m<r.colorid.length;m++)if(t[l]==r.colorid[m])if(d=!0,(t=[])[0]=r.colorid[m],e.colorId=t[0],a++,h.push(e),c==i){if(a++,h.push(r),a>=3)return g=[h,a,t,!0]}else{if(!o)return null==o&&a>=2?(a++,h.push(r),g=[h,a,t,!0]):g=[h=[],a=0,t=[],!0];if(4==o.heightLevel){if(o.colorid[0]!=t[0]&&o.colorid[1]!=t[0])return a>=2?(a++,h.push(r),g=[h,a,t,!0]):g=[h=[],a=0,t=[],!0]}else if(o.colorId!=t[0])return a>=2?(a++,h.push(r),g=[h,a,t,!0]):g=[h=[],a=0,t=[],!0]}}else if(t[l]==r.colorId)if(d=!0,(t=[])[0]=r.colorId,e.colorId=t[0],a++,h.push(e),c==i){if(a++,h.push(r),a>=3)return g=[h,a,t,!0]}else{if(!o)return null==o&&a>=2?(a++,h.push(r),g=[h,a,t,!0]):g=[h=[],a=0,t=[],!0];if(4==o.heightLevel){if(o.colorid[0]!=t[0]&&o.colorid[1]!=t[0])return a>=2?(a++,h.push(r),g=[h,a,t,!0]):g=[h=[],a=0,t=[],!0]}else if(o.colorId!=t[0])return a>=2?(a++,h.push(r),g=[h,a,t,!0]):g=[h=[],a=0,t=[],!0]}if(d)var g=[h,a,t,!1];else g=[h=[],a=0,t=[],!0];return g}}),cc._RF.pop()},{}],chessBoard:[function(e,r,o){"use strict";cc._RF.push(r,"c3df5rbdw1CEItl+Uhi+04a","chessBoard");var t=null;cc.Class({extends:cc.Component,properties:{layBgNode:cc.Node,layNodeSp:[cc.Prefab],layFrame:[cc.Prefab],transGetNode:cc.Prefab},onLoad:function(){t=this},layBgFun:function(e,r,o,a){var c=cc.instantiate(t.layNodeSp[o]);0==e?0==r?(t.frameFun(0,-18.5,18,c),"0"==a[e][r+1]?t.frameFun(1,18.5,18,c):t.frameFun(4,18.5,35,c,90),"0"==a[e+1][r]?("0"==a[e+1][r+1]?"0"==a[e][r+1]?t.frameFun(2,18.5,-18,c):t.frameFun(4,18.5,-35,c,90):o?c.getChildByName("tri_0_3").active=!0:c.getChildByName("tri_1_3").active=!0,t.frameFun(3,-18.5,-18,c)):("0"==a[e][r+1]&&("0"==a[e+1][r+1]?t.frameFun(4,35.5,-18,c):t.frameFun(3,-15.5,52,c)),t.frameFun(4,-35.5,-18,c))):8==r?(t.frameFun(1,18.5,18,c),"0"==a[e][r-1]?t.frameFun(0,-18.5,18,c):t.frameFun(4,-18.5,35,c,90),"0"==a[e+1][r]?("0"==a[e+1][r-1]?"0"==a[e][r-1]?t.frameFun(3,-18.5,-18,c):t.frameFun(4,-18.5,-35,c,90):o?c.getChildByName("tri_0_2").active=!0:c.getChildByName("tri_1_2").active=!0,t.frameFun(2,18.5,-18,c)):(t.frameFun(4,35.5,-18,c),"0"==a[e+1][r-1]?t.frameFun(4,-35.5,-18,c):"0"==a[e][r-1]&&(o?c.getChildByName("tri_0_2").active=!0:c.getChildByName("tri_1_2").active=!0))):("0"==a[e][r-1]?(t.frameFun(0,-18.5,18,c),"0"==a[e+1][r-1]?"0"==a[e+1][r]?t.frameFun(3,-18.5,-18,c):t.frameFun(4,-35.5,-18,c):o?c.getChildByName("tri_0_2").active=!0:c.getChildByName("tri_1_2").active=!0):(t.frameFun(4,-18.5,35,c,90),"0"==a[e+1][r-1]&&"0"==a[e+1][r]&&t.frameFun(4,-18.5,-35,c,90)),"0"==a[e][r+1]?(t.frameFun(1,18.5,18,c),"0"==a[e+1][r+1]?"0"==a[e+1][r]?t.frameFun(2,18.5,-18,c):t.frameFun(4,35.5,-18,c):o?c.getChildByName("tri_0_3").active=!0:c.getChildByName("tri_1_3").active=!0):(t.frameFun(4,18.5,35,c,90),"0"==a[e+1][r+1]&&"0"==a[e+1][r]&&t.frameFun(4,18.5,-35,c,90))):8==e?0==r?(t.frameFun(3,-18.5,-18,c),"0"==a[e][r+1]?t.frameFun(2,18.5,-18,c):t.frameFun(4,18.5,-35,c,90),"0"==a[e-1][r]?t.frameFun(0,-18.5,18,c):t.frameFun(4,-35.5,18,c),"0"==a[e-1][r+1]?"0"==a[e-1][r]?"0"==a[e][r+1]?t.frameFun(1,18.5,18,c):(t.frameFun(4,18.5,-35,c,90),t.frameFun(4,18.5,35,c,90)):t.frameFun(4,35.5,18,c):("0"==a[e-1][r]&&t.frameFun(2,15.5,52,c),"0"==a[e][r+1]&&(t.frameFun(0,52.5,16,c),o?c.getChildByName("tri_0_0").active=!0:c.getChildByName("tri_1_0").active=!0))):8==r?(t.frameFun(2,18.5,-18,c),"0"==a[e][r-1]?t.frameFun(3,-18.5,-18,c):t.frameFun(4,-18.5,-35,c,90),"0"==a[e-1][r]?t.frameFun(1,18.5,18,c):t.frameFun(4,35.5,18,c),"0"==a[e-1][r-1]?"0"==a[e-1][r]?"0"==a[e][r-1]?t.frameFun(0,-18.5,18,c):t.frameFun(4,-18.5,35,c,90):"0"==a[e][r-1]&&t.frameFun(4,-35.5,18,c):("0"==a[e-1][r]&&t.frameFun(3,-15.5,52,c),"0"==a[e][r-1]&&(t.frameFun(1,-52.5,16,c),o?c.getChildByName("tri_0_1").active=!0:c.getChildByName("tri_1_1").active=!0))):("0"==a[e][r-1]?t.frameFun(3,-18.5,-18,c):t.frameFun(4,-18.5,-35,c,90),"0"==a[e][r+1]?t.frameFun(2,18.5,-18,c):t.frameFun(4,18.5,-35,c,90),"0"==a[e-1][r]?("0"==a[e-1][r-1]?"0"==a[e][r-1]?t.frameFun(0,-18.5,18,c):t.frameFun(4,-18.5,35,c,90):(t.frameFun(3,-15.5,52,c),"0"==a[e][r-1]&&(t.frameFun(1,-52.5,16,c),o?c.getChildByName("tri_0_1").active=!0:c.getChildByName("tri_1_1").active=!0)),"0"==a[e-1][r+1]?"0"==a[e][r+1]?t.frameFun(1,18.5,18,c):t.frameFun(4,18.5,35,c,90):(t.frameFun(2,15.5,52,c),"0"==a[e][r+1]&&(t.frameFun(0,52.5,16,c),o?c.getChildByName("tri_0_0").active=!0:c.getChildByName("tri_1_0").active=!0))):("0"==a[e-1][r-1]?"0"==a[e][r-1]||t.frameFun(4,-18.5,-35,c,90):"0"==a[e][r-1]?(t.frameFun(1,-52.5,16,c),o?c.getChildByName("tri_0_1").active=!0:c.getChildByName("tri_1_1").active=!0):t.frameFun(4,-18.5,-35,c,90),"0"==a[e-1][r+1]?"0"==a[e][r+1]?t.frameFun(4,35.5,18,c):t.frameFun(4,18.5,-35,c,90):"0"==a[e][r+1]&&(t.frameFun(0,52.5,16,c),o?c.getChildByName("tri_0_0").active=!0:c.getChildByName("tri_1_0").active=!0))):0==r?("0"==a[e-1][r]?("0"==a[e][r+1]?"0"==a[e-1][r+1]?t.frameFun(1,18.5,18,c):(t.frameFun(2,15.5,52,c),t.frameFun(0,52.5,16,c),o?c.getChildByName("tri_0_0").active=!0:c.getChildByName("tri_1_0").active=!0):"0"==a[e-1][r+1]?t.frameFun(4,18.5,35,c,90):t.frameFun(2,15.5,52,c),t.frameFun(0,-18.5,18,c)):("0"==a[e][r+1]&&("0"==a[e-1][r+1]?t.frameFun(4,35.5,18,c):t.frameFun(0,52.5,16,c)),t.frameFun(4,-35.5,18,c)),"0"==a[e+1][r]?("0"==a[e][r+1]?"0"==a[e+1][r+1]?t.frameFun(2,18.5,-18,c):o?c.getChildByName("tri_0_3").active=!0:c.getChildByName("tri_1_3").active=!0:t.frameFun(4,18.5,-35,c,90),t.frameFun(3,-18.5,-18,c)):("0"==a[e][r+1]&&("0"==a[e+1][r+1]?t.frameFun(4,35.5,-18,c):o?c.getChildByName("tri_0_3").active=!0:c.getChildByName("tri_1_3").active=!0),t.frameFun(4,-35.5,-18,c))):8==r?("0"==a[e-1][r]?("0"==a[e-1][r-1]?"0"==a[e][r-1]?t.frameFun(0,-18.5,18,c):t.frameFun(4,-18.5,35,c,90):("0"==a[e][r-1]&&(t.frameFun(1,-52.5,16,c),o?c.getChildByName("tri_0_1").active=!0:c.getChildByName("tri_1_1").active=!0),t.frameFun(3,-15.5,52,c)),t.frameFun(1,18.5,18,c)):("0"==a[e-1][r-1]?"0"==a[e][r-1]&&t.frameFun(4,-35.5,18,c):"0"==a[e][r-1]&&(t.frameFun(1,-52.5,16,c),o?c.getChildByName("tri_0_1").active=!0:c.getChildByName("tri_1_1").active=!0),t.frameFun(4,35.5,18,c)),"0"==a[e+1][r]?("0"==a[e+1][r-1]?"0"==a[e][r-1]?t.frameFun(3,-18.5,-18,c):t.frameFun(4,-18.5,-35,c,90):"0"==a[e][r-1]&&(o?c.getChildByName("tri_0_2").active=!0:c.getChildByName("tri_1_2").active=!0),t.frameFun(2,18.5,-18,c)):("0"==a[e+1][r-1]?"0"==a[e][r-1]&&t.frameFun(4,-35.5,-18,c):"0"==a[e][r-1]&&(o?c.getChildByName("tri_0_2").active=!0:c.getChildByName("tri_1_2").active=!0),t.frameFun(4,35.5,-18,c))):("0"==a[e-1][r]?("0"==a[e-1][r-1]?"0"==a[e][r-1]?t.frameFun(0,-18.5,18,c):t.frameFun(4,-18.5,35,c,90):(t.frameFun(3,-15.5,52,c),"0"==a[e][r-1]&&t.frameFun(1,-52.5,16,c)),"0"==a[e-1][r+1]?"0"==a[e][r+1]?t.frameFun(1,18.5,18,c):t.frameFun(4,18.5,35,c,90):(t.frameFun(2,15.5,52,c),"0"==a[e][r+1]&&t.frameFun(0,52.5,16,c))):("0"==a[e-1][r-1]?"0"==a[e][r-1]&&t.frameFun(4,-35.5,18,c):"0"==a[e][r-1]&&t.frameFun(1,-52.5,16,c),"0"==a[e-1][r+1]?"0"==a[e][r+1]&&t.frameFun(4,35.5,18,c):"0"==a[e][r+1]&&t.frameFun(0,52.5,16,c)),"0"==a[e+1][r]?("0"==a[e+1][r-1]&&("0"==a[e][r-1]?t.frameFun(3,-18.5,-18,c):t.frameFun(4,-18.5,-35,c,90)),"0"==a[e+1][r+1]&&("0"==a[e][r+1]?t.frameFun(2,18.5,-18,c):t.frameFun(4,18.5,-35,c,90))):("0"==a[e+1][r-1]&&"0"==a[e][r-1]&&t.frameFun(4,-35.5,-18,c),"0"==a[e+1][r+1]&&"0"==a[e][r+1]&&t.frameFun(4,35.5,-18,c)),"0"!=a[e+1][r-1]&&"0"==a[e][r-1]&&(o?c.getChildByName("tri_0_2").active=!0:c.getChildByName("tri_1_2").active=!0),"0"!=a[e+1][r+1]&&"0"==a[e][r+1]&&(o?c.getChildByName("tri_0_3").active=!0:c.getChildByName("tri_1_3").active=!0),"0"!=a[e-1][r-1]&&"0"==a[e][r-1]&&(o?c.getChildByName("tri_0_1").active=!0:c.getChildByName("tri_1_1").active=!0),"0"!=a[e-1][r+1]&&"0"==a[e][r+1]&&(o?c.getChildByName("tri_0_0").active=!0:c.getChildByName("tri_1_0").active=!0)),t.layBgNode.addChild(c),c.x=68*r-272,c.y=272-68*e},frameFun:function(e,r,o,a,c){var i=cc.instantiate(t.layFrame[e]);a.addChild(i),c&&(i.rotation=c),i.x=r,i.y=o},transGetFun:function(e){var r=cc.instantiate(t.transGetNode);t.layBgNode.addChild(r),r.x=68*e.x-272,r.y=223-68*e.y;var o=cc.repeatForever(cc.sequence(cc.moveBy(1,0,-10),cc.moveBy(1,0,10)));r.runAction(o)}}),cc._RF.pop()},{}],cloneBlock:[function(e,r,o){"use strict";cc._RF.push(r,"bf08fV9wb9H85VvQ1Lb/wNX","cloneBlock"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.animNameArr=["gn","idle","vt","og","ye","rd"];var e=.5+.5*Math.random();this.schedule(this.cloneFun,e)},cloneFun:function(){if(this.unschedule(this.cloneFun,this),!this.node.des){var e=this.animNameArr[Math.floor(5.99*Math.random())],r=2.5+2.5*Math.random();this.schedule(this.cloneFun,r),this.node.getComponent(cc.Animation).play(e)}}}),cc._RF.pop()},{}],flyBlock:[function(e,r,o){"use strict";cc._RF.push(r,"32330DPZMZDcYLsW/SVvOT0","flyBlock"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(cc.xx){if(!cc.xx.checkBlockJS){var r=e("checkBlock");cc.xx.checkBlockJS=new r}if(!cc.xx.butterFlyJS){var o=e("butterFly");cc.xx.butterFlyJS=new o}}else{cc.xx={};r=e("checkBlock");cc.xx.checkBlockJS=new r;o=e("butterFly");cc.xx.butterFlyJS=new o}this.node.realTag=!1,this.orignP=this.node.position,this.node.lastPx=this.node.x,this.node.lastPy=this.node.y,this.t=0,this.orderTarget=!1,this.gameOver=!1,this.targetInit=!1,this.checkTarget(),cc.xx.gameJS.flyNumAdd(),this.node.getComponent(cc.Animation).play()},checkLayState:function(){this.orderTarget=!1;for(var e=0;e<gameLayArr.length;e++){for(var r=0;r<gameLayArr[e].length;r++)if(null!=gameLayArr[e][r]&&"-100"!=gameLayArr[e][r]&&"stand"==gameLayArr[e][r].state){this.orderTarget=!0;break}if(this.orderTarget)return}this.orderTarget=!1},checkTarget:function(){if(this.p1=null,this.p2=null,this.checkLayState(),this.orderTarget){var e=Math.floor(8.99*Math.random()),r=Math.floor(8.99*Math.random());if(this.p1={x:68*r-272,y:272-68*e},cc.xx.gameJS.getFlyBoard())this.p2=cc.xx.gameJS.getFlyTarget(),void 0===this.p2?this.node.realTag=!1:this.node.realTag=!0;else for(var o=Math.floor(8.99*Math.random()),t=0;t<gameLayArr[o].length;t++){r=Math.floor(8.99*Math.random());if(null!=gameLayArr[o][r]){this.p2={x:68*r-272,y:272-68*o};break}}if(!this.p2){o=Math.floor(8.99*Math.random()),r=Math.floor(8.99*Math.random());this.p2={x:68*r-272,y:272-68*o}}}else this.orderTarget=!1,this.gameOver=!0,cc.xx.gameJS.checkGameOver();this.targetInit=!0},moveFun:function(e,r,o,t){var a=1-t;if(void 0===o){var c=Math.floor(8.99*Math.random());o={x:68*(d=Math.floor(8.99*Math.random()))-272,y:272-68*c},this.node.realTag=!1}if(this.node.x=a*a*e.x+2*t*a*r.x+t*t*o.x,this.node.y=a*a*e.y+2*t*a*r.y+t*t*o.y,this.node.rotation=90-this.checkAngle(this.node.lastPx,this.node.lastPy,this.node.x,this.node.y),this.node.lastPx=this.node.x,this.node.lastPy=this.node.y,this.node.realTag&&1==t){if(void 0!==o.i&&void 0!==o.j)if(cc.xx.gameJS.checkAllBoom()&&"boom"!=gameLayArr[o.i][o.j].state&&"-100"!=gameLayArr[o.i][o.j]){if(gameLayArr[o.i][o.j].state="boom",gameLayArr[o.i][o.j].heightLevel||flycheckArr.push(gameLayArr[o.i][o.j]),gameLayArr[o.i][o.j].heightLevel&&5!=gameLayArr[o.i][o.j].heightLevel)if(1==gameLayArr[o.i][o.j].heightLevel){rcheckArr.push(gameLayArr[o.i][o.j]),gameLayArr[o.i][o.j].arr=[],gameLayArr[o.i][o.j].arr.push(gameLayArr[o.i][o.j]);var i=Math.floor(Math.random()*(colorArr.length-.1));cc.xx.checkBlockJS.checkRainBoom(gameLayArr[o.i][o.j],colorArr[i])}else"v"==gameLayArr[o.i][o.j].hv?(hcheckedArr.push(gameLayArr[o.i][o.j]),cc.xx.checkBlockJS.twvBoom(gameLayArr[o.i][o.j].j,gameLayArr[o.i][o.j].i)):"h"==gameLayArr[o.i][o.j].hv?(hcheckedArr.push(gameLayArr[o.i][o.j]),cc.xx.checkBlockJS.twhBoom(gameLayArr[o.i][o.j].i,gameLayArr[o.i][o.j].j)):gameLayArr[o.i][o.j].bz?(gameLayArr[o.i][o.j].state="stand",hcheckedArr.push(gameLayArr[o.i][o.j]),cc.xx.checkBlockJS.bzBoom(gameLayArr[o.i][o.j]),gameLayArr[o.i][o.j].state="boom"):4==gameLayArr[o.i][o.j].heightLevel&&(cc.xx.butterFlyJS.flyflyFun(gameLayArr[o.i][o.j]),gameLayArr[o.i][o.j].destroy(),gameLayArr[o.i][o.j]="-100",cc.xx.gameJS.checkDown());else 5==gameLayArr[o.i][o.j].heightLevel&&(cc.xx.gameJS.checkorderFun(gameLayArr[o.i][o.j]),gameLayArr[o.i][o.j].destroy(),gameLayArr[o.i][o.j]="-100",cc.xx.gameJS.cloneToFly(o.i,o.j));this.node.heightLevel&&("h"==this.node.hv?(cc.xx.gameJS.flytwAnimFun(gameLayArr[o.i][o.j].x,gameLayArr[o.i][o.j].y),cc.xx.checkBlockJS.flyhBoom(gameLayArr[o.i][o.j].i,gameLayArr[o.i][o.j].j,this.node.colorId)):"v"==this.node.hv?(cc.xx.gameJS.flytwAnimFun(gameLayArr[o.i][o.j].x,gameLayArr[o.i][o.j].y,!0),cc.xx.checkBlockJS.flyvBoom(gameLayArr[o.i][o.j].j,gameLayArr[o.i][o.j].i,this.node.colorId)):this.node.bz&&(this.node.i=o.i,this.node.j=o.j,cc.xx.gameJS.flybzAnimFun(gameLayArr[o.i][o.j].x,gameLayArr[o.i][o.j].y,parseInt(this.node.colorId)),cc.xx.checkBlockJS.bzBoom(this.node))),this.node.active=!1,cc.xx.gameJS.flyBoom(),this.node.destroy()}else cc.xx.gameJS.destroyNode(),this.orignP=this.node.position,this.t=0,this.checkTarget()}else if(1==t)this.orignP=this.node.position,this.t=0,this.checkTarget();else if(cc.xx.gameJS.getFlyBoard()&&!this.node.realTag&&1==t){this.node.realTag=!0,this.t=0,this.orignP=this.node.position,this.orderTarget=!1,this.targetInit=!1;for(var n=0;n<gameLayArr.length;n++){for(var h=0;h<gameLayArr[n].length;h++)if(null!=gameLayArr[n][h]&&"-100"!=gameLayArr[n][h]&&"stand"==gameLayArr[n][h].state){this.orderTarget=!0,this.targetInit=!0;break}if(this.orderTarget)break}if(this.orderTarget){if(this.p2=cc.xx.gameJS.getFlyTarget(),!this.p2)for(c=Math.floor(8.99*Math.random()),h=0;h<gameLayArr[c].length;h--){var d=Math.floor(8.99*Math.random());if(null!=gameLayArr[c][d]){this.p2={x:68*d-272,y:272-68*c};break}}}else this.gameOver=!0,this.orderTarget=!1,cc.xx.gameJS.checkGameOver()}if(!this.node.realTag&&cc.xx.gameJS.getFlyBoard())if(this.p2=cc.xx.gameJS.getFlyTarget(),void 0===this.p2)this.node.realTag=!1;else{this.node.realTag=!0,this.orignP=this.node.position;var l=Math.floor(8.99*Math.random());d=Math.floor(8.99*Math.random());this.p1={x:68*d-272,y:272-68*l},this.t=0}},checkAngle:function(e,r,o,t){return o>e&&r>t?360+360*Math.atan((t-r)/(o-e))/(2*Math.PI):o==e&&r>t?270:e>o&&r==t?180:e>o&&r>t?180+360*Math.atan((t-r)/(o-e))/(2*Math.PI):e==o&&r<t?90:e>o&&r<t?180+360*Math.atan((t-r)/(o-e))/(2*Math.PI):360*Math.atan((t-r)/(o-e))/(2*Math.PI)},update:function(e){this.orderTarget?this.t<1&&(this.t+=e/gameParamObj.butterFlySpeed,this.t>1&&(this.t=1),this.moveFun(this.orignP,this.p1,this.p2,this.t)):!this.gameOver&&this.targetInit&&(this.gameOver=!0,this.orderTarget=!1,cc.xx.gameJS.checkGameOver())}}),cc._RF.pop()},{butterFly:"butterFly",checkBlock:"checkBlock"}],gameJS:[function(e,r,o){"use strict";cc._RF.push(r,"461b712OkhIL7bMU8Bv4+Xi","gameJS"),window.tcheckedArr=[],window.vcheckedArr=[],window.hcheckedArr=[],window.flyBlockArr=[],window.bzcheckArr=[],window.rcheckArr=[],window.flycheckArr=[];var t=e("checkBlock"),a=e("heightLevelNode"),c=e("chessBoard"),i=e("butterFly"),n=e("checkGame"),h=e("http"),d=e("spineCtr"),l=e("nutsJS");window.gameLayArr=[],window.heightLevelArr=[],window.rainBowArr=[],window.moveEdNode=null,window.otherMovedNode=null;var m=null,g=[],s=[];window.colorArr=[],cc.Class({extends:cc.Component,editor:{executionOrder:-1},properties:{gameLayNode:cc.Node,blockArr:[cc.Prefab],stepsLabel:cc.Label,orderBlock:[cc.Node],orderNum:[cc.Label],resultNode:cc.Node,twBoom:[cc.Prefab],boomSound:cc.AudioSource,streakNode:cc.Node,streakLay:cc.Node,layPNode:cc.Node,twbzboomPrefab:cc.Prefab,bzBoom:[cc.Prefab],doblePrefab:cc.Prefab,celebrateNode:cc.Node},onLoad:function(){(m=this).orderTargetArr=[],m.baseTargetArr=[],m.streakRound=0,m.flyNum=0,m.downFinish=!1,m.noMoved=!0,m.readyMoveNode=null,m.downNum=0,m.downNum2=0,m.leftDownNum=0,m.rightDownNum=0,m.blockSpeed=700,m.createBlockNum=0,m.canCheck=!0,m.twbzBoomNum=0,m.gameOver,m.celebrateNode.getChildByName("hide").on("touchstart",function(e){e.stopPropagation()})},isNumber:function(e){return null!=/^[0-9]*$/.exec(e)&&""!=e},orderBlockFun:function(e){cc.loader.loadRes("prefab/order/"+m.order[e].iconSmall,function(r,o){var t=cc.instantiate(o);m.orderBlock[e].addChild(t)})},Init:function(e,r,o,t,a,i,n,h){colorArr=n,s=i,m.gameOver=!1,m.flyFly=!1,m.touched=!1,m.rouchedNode=null,m.canControl=!1,m.cantouchMove=!1,m.canMove=!1,m.noMoved=!1,m.boardState=!1,m.touchIndex=0,m.flyNum=0,m.steps=parseInt(r),m.totleSteps=m.steps,m.stepsLabel.string=m.steps,m.order=o,h&&(m.transportArr=h),m.orderBlock[0].removeAllChildren(),m.orderBlock[1].removeAllChildren(),m.orderNum[0].string="",m.orderNum[1].string="",o.length>1?(m.orderNum[0].node.y=64,m.orderNum[1].node.y=-26.5,m.orderBlock[0].y=49,m.orderBlock[1].y=-43.5):(m.orderBlock[0].y=0,m.orderNum[0].node.y=15);for(var d=0;d<m.order.length;d++)m.orderNum[d].string=m.order[d].num,m.orderBlockFun(d);g=a;var l={color:null,score:null};m.baseNodeArr=[],m.initNum=0;for(var u=0;u<t.documentElement.children.length;u++)if("defaultValue"==t.documentElement.children[u].nodeName)l.color=t.documentElement.children[u].getAttribute("color"),l.score=t.documentElement.children[u].getAttribute("score");else if("blocks"==t.documentElement.children[u].nodeName)for(var y=0;y<t.documentElement.children[u].children.length;y++)if("0"!=t.documentElement.children[u].children[y].getAttribute("blockType")){var A={blockId:t.documentElement.children[u].children[y].getAttribute("blockId"),blockType:t.documentElement.children[u].children[y].getAttribute("blockType"),param:t.documentElement.children[u].children[y].getAttribute("param"),icon:t.documentElement.children[u].children[y].getAttribute("icon")};t.documentElement.children[u].children[y].getAttribute("color")?A.colorId=t.documentElement.children[u].children[y].getAttribute("color"):A.colorId=l.color,m.baseNodeArr.push(A)}for(d=0;d<e.length;d++)for(var f=0;f<e[d].length;f++)if(m.isNumber(e[d][f])&&"0"!=e[d][f]&&"-1"!=e[d][f]&&"1"!=e[d][f]){for(u=0;u<t.documentElement.children.length;u++)if("blocks"==t.documentElement.children[u].nodeName)for(y=0;y<t.documentElement.children[u].children.length;y++)if(e[d][f]==t.documentElement.children[u].children[y].getAttribute("blockId")){var L={blockId:t.documentElement.children[u].children[y].getAttribute("blockId"),blockType:t.documentElement.children[u].children[y].getAttribute("blockType"),param:t.documentElement.children[u].children[y].getAttribute("param"),icon:t.documentElement.children[u].children[y].getAttribute("icon")};t.documentElement.children[u].children[y].getAttribute("color")?L.colorId=t.documentElement.children[u].children[y].getAttribute("color"):L.colorId=l.color,m.nodeFun(d,f,L)}d%2==0&&(f%2==0?c.prototype.layBgFun(d,f,0,e):c.prototype.layBgFun(d,f,1,e)),d%2==1&&(f%2==0?c.prototype.layBgFun(d,f,1,e):c.prototype.layBgFun(d,f,0,e))}else if("1"==e[d][f]){d%2==0&&(f%2==0?c.prototype.layBgFun(d,f,0,e):c.prototype.layBgFun(d,f,1,e)),d%2==1&&(f%2==0?c.prototype.layBgFun(d,f,1,e):c.prototype.layBgFun(d,f,0,e));for(var v=Math.random(),p=0;p<s.length;p++)if(v<=s[p].weight){for(y=0;y<m.baseNodeArr.length;y++)if(s[p].id==m.baseNodeArr[y].blockId){m.nodeFun(d,f,m.baseNodeArr[y]);break}break}}else"-1"==e[d][f]&&(d%2==0&&(f%2==0?c.prototype.layBgFun(d,f,0,e):c.prototype.layBgFun(d,f,1,e)),d%2==1&&(f%2==0?c.prototype.layBgFun(d,f,1,e):c.prototype.layBgFun(d,f,0,e)));for(d=0;d<h.length;d++)c.prototype.transGetFun(h[d]);setTimeout(function(){m.gameArrFun(e)},500)},checkBlock:function(){if(!m.gameOver){for(var e=!1,r=0;r<g.length;r++)if("-100"==gameLayArr[g[r].y][g[r].x])for(var o=Math.random(),t=0;t<s.length;t++)if(o<=s[t].weight){for(var a=0;a<m.baseNodeArr.length;a++)if(s[t].id==m.baseNodeArr[a].blockId){m.createBlock(g[r].y,g[r].x,m.baseNodeArr[a]),e=!0;break}break}e||m.leftDown()}},streakFun:function(){var e=cc.instantiate(m.streakNode),r=cc.callFunc(function(){this.destroy()},e);if(1==m.streakRound){e.x=m.rouchedNode.x-34,e.y=m.rouchedNode.y;var o=cc.sequence(cc.moveTo(.2,68*m.rouchedNode.j-238,272-68*m.rouchedNode.i),cc.delayTime(.05),r)}else if(2==m.streakRound){e.x=m.rouchedNode.x+34,e.y=m.rouchedNode.y;o=cc.sequence(cc.moveTo(.2,68*m.rouchedNode.j-306,272-68*m.rouchedNode.i),cc.delayTime(.05),r)}else if(3==m.streakRound){e.x=m.rouchedNode.x,e.y=m.rouchedNode.y-34;o=cc.sequence(cc.moveTo(.2,68*m.rouchedNode.j-272,306-68*m.rouchedNode.i),cc.delayTime(.05),r)}else if(4==m.streakRound){e.x=m.rouchedNode.x,e.y=m.rouchedNode.y+34;o=cc.sequence(cc.moveTo(.2,68*m.rouchedNode.j-272,238-68*m.rouchedNode.i),cc.delayTime(.05),r)}m.streakLay.addChild(e),e.runAction(o)},touchEndMove:function(e){null==m.readyMoveNode&&m.noMoved?(m.readyMoveNode=this,m.startVec=e.getLocation()):null!=m.readyMoveNode&&""==m.readyMoveNode.name&&(m.readyMoveNode=null)},touchMoveMove:function(e){if(m.readyMoveNode&&m.readyMoveNode==this&&m.noMoved){var r=e.getLocation();if(!m.gameOver){m.rouchedNode=this,m.cantouchMove=!0;var o={i:-1,j:-1},a=null;if(r.x-m.startVec.x>30&&m.rouchedNode.j<8?(m.streakRound=1,a=gameLayArr[m.rouchedNode.i][m.rouchedNode.j+1],o.i=m.rouchedNode.i,o.j=m.rouchedNode.j,m.rouchedNode.j=m.rouchedNode.j+1,m.noMoved=!1,m.rouchedNode.round=1):r.x-m.startVec.x<-30&&m.rouchedNode.j>0?(m.streakRound=2,a=gameLayArr[m.rouchedNode.i][m.rouchedNode.j-1],o.i=m.rouchedNode.i,o.j=m.rouchedNode.j,m.rouchedNode.j=m.rouchedNode.j-1,m.noMoved=!1,m.rouchedNode.round=1):r.y-m.startVec.y>30&&m.rouchedNode.i>0?(m.streakRound=3,a=gameLayArr[m.rouchedNode.i-1][m.rouchedNode.j],o.i=m.rouchedNode.i,o.j=m.rouchedNode.j,m.rouchedNode.i=m.rouchedNode.i-1,m.noMoved=!1,m.rouchedNode.round=0):r.y-m.startVec.y<-30&&m.rouchedNode.i<8&&(m.streakRound=4,a=gameLayArr[m.rouchedNode.i+1][m.rouchedNode.j],o.i=m.rouchedNode.i,o.j=m.rouchedNode.j,m.rouchedNode.i=m.rouchedNode.i+1,m.noMoved=!1,m.rouchedNode.round=0),null!=a&&"-100"!=a){if(a.j=o.j,a.i=o.i,gameLayArr[m.rouchedNode.i][m.rouchedNode.j]=m.rouchedNode,gameLayArr[o.i][o.j]=a,5!=a.heightLevel&&5!=m.rouchedNode.heightLevel&&(a.heightLevel&&m.rouchedNode.heightLevel||1==a.heightLevel||1==m.rouchedNode.heightLevel)){if(1==a.heightLevel||1==m.rouchedNode.heightLevel)var c=cc.callFunc(function(e){if(gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleX=1,gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleY=1,m.steps--,m.stepsLabel.string=m.steps,m.boardState=!1,1!=a.heightLevel){var r=cc.repeatForever(cc.rotateBy(2,120));m.rouchedNode.runAction(r),m.rouchedNode.getChildByName("boom").getComponent(cc.Animation).play("colorCheck"),m.rouchedNode.state="boom",rcheckArr.push(m.rouchedNode),m.rouchedNode.arr=[],m.rouchedNode.arr.push(m.rouchedNode),2==a.heightLevel?t.prototype.checkRainBoom(m.rouchedNode,a.colorId,"bz"):3==a.heightLevel?t.prototype.checkRainBoom(m.rouchedNode,a.colorId,"tw"):4==a.heightLevel?(m.flyFly=!0,a.state="boom",hcheckedArr.push(a),t.prototype.checkRainFly(a.colorid[0],a.colorid[1],m.rouchedNode.i,m.rouchedNode.j)):a&&t.prototype.checkRainBoom(m.rouchedNode,a.colorId)}else if(1!=m.rouchedNode.heightLevel){r=cc.repeatForever(cc.rotateBy(2,120));a.runAction(r),a.getChildByName("boom").getComponent(cc.Animation).play("colorCheck"),a.state="boom",rcheckArr.push(a),a.arr=[],a.arr.push(a),2==m.rouchedNode.heightLevel?t.prototype.checkRainBoom(a,m.rouchedNode.colorId,"bz"):3==m.rouchedNode.heightLevel?t.prototype.checkRainBoom(a,m.rouchedNode.colorId,"tw"):4==m.rouchedNode.heightLevel?(m.flyFly=!0,m.rouchedNode.state="boom",hcheckedArr.push(m.rouchedNode),t.prototype.checkRainFly(m.rouchedNode.colorid[0],m.rouchedNode.colorid[1],a.i,a.j)):(hcheckedArr.push(a),t.prototype.checkRainBoom(a,m.rouchedNode.colorId))}else m.dobleColor(m.rouchedNode.x,m.rouchedNode.y),m.canvasAction(),t.prototype.checkRainBoomAll();m.readyMoveNode=null,m.noMoved=!1},a);else if(4!=a.heightLevel&&5!=a.heightLevel&&4!=m.rouchedNode.heightLevel&&5!=m.rouchedNode.heightLevel)c=cc.callFunc(function(e){if(gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleX=1,gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleY=1,m.steps--,m.stepsLabel.string=m.steps,m.boardState=!1,2==a.heightLevel&&2==m.rouchedNode.heightLevel)t.prototype.bzbzBoom(m.rouchedNode,a),m.canvasAction(),0==rcheckArr.length&&m.destroyNode(),m.readyMoveNode=null,m.noMoved=!1;else if(3==a.heightLevel&&3==m.rouchedNode.heightLevel){if(a.heightLevel=99,a.hv="",t.prototype.twhBoom(m.rouchedNode.i,m.rouchedNode.j),t.prototype.twvBoom(m.rouchedNode.j,m.rouchedNode.i),"h"==m.rouchedNode.hv){var r=cc.instantiate(m.twBoom[0]);m.rouchedNode.addChild(r)}else{r=cc.instantiate(m.twBoom[1]);m.rouchedNode.addChild(r)}0==rcheckArr.length&&m.destroyNode(),m.readyMoveNode=null,m.noMoved=!1}else(2==a.heightLevel&&3==m.rouchedNode.heightLevel||3==a.heightLevel&&2==m.rouchedNode.heightLevel)&&(m.twbzBoomFun(m.rouchedNode,a),m.readyMoveNode=null,m.noMoved=!1)},a);else if(4==a.heightLevel&&m.rouchedNode.heightLevel||a.heightLevel&&4==m.rouchedNode.heightLevel)c=cc.callFunc(function(e){gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleX=1,gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleY=1,m.steps--,m.stepsLabel.string=m.steps,m.boardState=!1,4==a.heightLevel&&4==m.rouchedNode.heightLevel?(moveEdNode.flyCreated=!0,otherMovedNode.flyCreated=!0,m.rouchedNode.flyCreated=!0,a.flyCreated=!0,i.prototype.flyflyFun(m.rouchedNode,a)):4==a.heightLevel?(otherMovedNode.flyCreated=!0,a.flyCreated=!0,3==m.rouchedNode.heightLevel?i.prototype.flytwFun(a,m.rouchedNode.hv):2==m.rouchedNode.heightLevel&&i.prototype.flybzFun(a)):4==m.rouchedNode.heightLevel&&(moveEdNode.flyCreated=!0,m.rouchedNode.flyCreated=!0,3==a.heightLevel?i.prototype.flytwFun(m.rouchedNode,a.hv):2==a.heightLevel&&i.prototype.flybzFun(m.rouchedNode)),m.flyFly=!0,a.state="boom",m.rouchedNode.state="boom",gameLayArr[a.i][a.j]="-100",gameLayArr[m.rouchedNode.i][m.rouchedNode.j]="-100",a.destroy(),m.rouchedNode.destroy(),0==rcheckArr.length&&m.destroyNode("n"),m.readyMoveNode=null,m.noMoved=!1},a)}else if(5!=a.heightLevel&&5!=m.rouchedNode.heightLevel||"transport_1"==a.name||"transport_1"==m.rouchedNode.name){if(""!=a.name)c=cc.callFunc(function(e){if(m.boardState=!1,m.checkConnected())gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleX=1,gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleY=1,m.steps--,m.stepsLabel.string=m.steps,0==rcheckArr.length&&(m.destroyNode(),m.readyMoveNode=null);else{o.i=a.i,o.j=a.j,a.i=m.rouchedNode.i,a.j=m.rouchedNode.j,m.rouchedNode.i=o.i,m.rouchedNode.j=o.j,gameLayArr[m.rouchedNode.i][m.rouchedNode.j]=m.rouchedNode,gameLayArr[a.i][a.j]=a,gameLayArr[a.i][a.j].stopAllActions();var r=cc.callFunc(function(){gameLayArr[m.rouchedNode.i][m.rouchedNode.j].zIndex--,m.readyMoveNode=null,m.noMoved=!0,m.boardState=!0,m.flyTargetArrFun()}),t=cc.sequence(cc.moveTo(.2,68*a.j-272,272-68*a.i),r);gameLayArr[a.i][a.j].runAction(t),1==m.streakRound||3==m.streakRound?m.streakRound++:2!=m.streakRound&&4!=m.streakRound||m.streakRound--,m.streakFun(),gameLayArr[m.rouchedNode.i][m.rouchedNode.j].stopAllActions();var c=cc.spawn(cc.moveTo(.2,68*m.rouchedNode.j-272,272-68*m.rouchedNode.i),cc.sequence(cc.scaleTo(.134,1.49,1.49),cc.scaleTo(.067,1,1)));gameLayArr[m.rouchedNode.i][m.rouchedNode.j].runAction(c)}},a)}else var c=cc.callFunc(function(e){if(m.boardState=!1,gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleX=1,gameLayArr[m.rouchedNode.i][m.rouchedNode.j].scaleY=1,5==a.heightLevel&&5==m.rouchedNode.heightLevel){m.checkorderFun(m.rouchedNode),m.checkorderFun(a);for(var r=[],o=0;o<colorArr.length;o++){var c={i:colorArr[o],h:"h"};r.push(c);var i={i:colorArr[o],h:"v"};r.push(i);var h={i:colorArr[o],h:"b"};r.push(h)}h={i:0,h:"c"};r.push(h);var d=r[Math.floor(Math.random()*(r.length-.01))],l=r[Math.floor(Math.random()*(r.length-.01))],g=null,s=null;if("c"==d.h){(g=cc.instantiate(m.blockArr[25])).heightLevel=1;var u=cc.repeatForever(cc.rotateBy(5,120));g.runAction(u)}else"h"==d.h?((g=cc.instantiate(m.blockArr[parseInt(d.i)+6])).hv="h",g.round=1,g.heightLevel=3):"v"==d.h?((g=cc.instantiate(m.blockArr[parseInt(d.i)+12])).hv="v",g.round=0,g.heightLevel=3):"b"==d.h&&((g=cc.instantiate(m.blockArr[parseInt(d.i)+18])).round=0,g.bz=!0,g.heightLevel=2);if("c"==l.h){(s=cc.instantiate(m.blockArr[25])).heightLevel=1;u=cc.repeatForever(cc.rotateBy(5,120));s.runAction(u)}else"h"==l.h?((s=cc.instantiate(m.blockArr[parseInt(l.i)+6])).hv="h",s.round=1,s.heightLevel=3):"v"==l.h?((s=cc.instantiate(m.blockArr[parseInt(l.i)+12])).hv="v",s.round=0,s.heightLevel=3):"b"==l.h&&((s=cc.instantiate(m.blockArr[parseInt(l.i)+18])).round=0,s.bz=!0,s.heightLevel=2);g.colorId=parseInt(d.i),g.i=m.rouchedNode.i,g.j=m.rouchedNode.j,g.x=m.rouchedNode.x,g.y=m.rouchedNode.y,g.tzIndex=0,g.state="stand",m.gameLayNode.addChild(g),gameLayArr[g.i][g.j]=g,g.des=!1,g.on("touchstart",m.touchEndMove,g),g.on("touchmove",m.touchMoveMove,g),g.on("touchend",m.touchEndEnd,g),g.on("touchcancel",function(e){m.readyMoveNode}),m.rouchedNode.destroy(),s.colorId=parseInt(l.i),s.i=a.i,s.j=a.j,s.x=a.x,s.y=a.y,s.tzIndex=0,s.state="stand",m.gameLayNode.addChild(s),gameLayArr[a.i][a.j]=s,s.des=!1,s.on("touchstart",m.touchEndMove,s),s.on("touchmove",m.touchMoveMove,s),s.on("touchend",m.touchEndEnd,s),s.on("touchcancel",function(e){m.readyMoveNode}),a.destroy()}else{if(5==a.heightLevel){m.checkorderFun(a);var y=t.prototype.cloneBoom(m.rouchedNode,a);if(1==m.rouchedNode.heightLevel){var A=cc.repeatForever(cc.rotateBy(5,120));m.rouchedNode.runAction(A)}}else{m.checkorderFun(m.rouchedNode);y=t.prototype.cloneBoom(a,m.rouchedNode);if(1==a.heightLevel){A=cc.repeatForever(cc.rotateBy(5,120));m.rouchedNode.runAction(A)}}if(1==y.heightLevel){u=cc.repeatForever(cc.rotateBy(5,120));y.runAction(u)}m.gameLayNode.addChild(y),y.on("touchstart",m.touchEndMove,y),y.on("touchmove",m.touchMoveMove,y),y.on("touchend",m.touchEndEnd,y),y.on("touchcancel",function(e){m.readyMoveNode})}m.readyMoveNode=null,m.noMoved=!1,m.checkConnected()?0==rcheckArr.length&&m.destroyNode():m.flyFly?(m.canControl=!0,m.boardState=!0,m.flyTargetArrFun()):(n.prototype.timersReset(),n.prototype.exchangCheckArrFun(gameLayArr)||(m.canControl=!0,m.noMoved=!0,m.checkResult()))},a);gameLayArr[a.i][a.j].stopAllActions(),gameLayArr[m.rouchedNode.i][m.rouchedNode.j].stopAllActions(),gameLayArr[m.rouchedNode.i][m.rouchedNode.j].zIndex++;var h=cc.moveTo(.2,68*a.j-272,272-68*a.i);gameLayArr[a.i][a.j].runAction(h);var d=cc.sequence(cc.spawn(cc.moveTo(.2,68*m.rouchedNode.j-272,272-68*m.rouchedNode.i),cc.sequence(cc.scaleTo(.134,1.49,1.49),cc.scaleTo(.067,1,1))),c);gameLayArr[m.rouchedNode.i][m.rouchedNode.j].runAction(d),moveEdNode=gameLayArr[m.rouchedNode.i][m.rouchedNode.j],otherMovedNode=gameLayArr[a.i][a.j],otherMovedNode.round=moveEdNode.round,m.streakFun()}else-1!=o.i&&(m.rouchedNode.i=o.i,m.rouchedNode.j=o.j,m.readyMoveNode=null,m.noMoved=!0)}}},checkLayS:function(){for(var e=0;e<gameLayArr.length;e++)for(var r=0;r<gameLayArr[e].length;r++)gameLayArr[e][r]&&console.log("i:"+e+" j:"+r+" state:"+gameLayArr[e][r].state)},touchEndEnd:function(e){m.readyMoveNode=null},createBlock:function(e,r,o){if(!m.gameOver)for(var t=0;t<m.blockArr.length;t++)if(m.blockArr[t].name==o.icon){var a=cc.instantiate(m.blockArr[t]);m.createBlockNum++,a.colorId=o.colorId,a.i=e,a.j=r,a.x=68*r-272,a.y=272-68*(e-1),a.tzIndex=0,"transport_1"==a.name?a.state="boom":a.state="stand",a.heightLevel=0,a.round=0,a.hv="",a.heightNodePX=null,a.heightNodePY=null,a.animNum=0,m.gameLayNode.addChild(a),gameLayArr[e][r]=a,a.des=!1,a.on("touchstart",this.touchEndMove,a),a.on("touchmove",this.touchMoveMove,a),a.on("touchend",this.touchEndEnd,a),a.on("touchcancel",function(e){m.readyMoveNode}),setTimeout(function(){m.createBlockNum--,m.createBlockNum||m.checkDown()},70);var c=cc.sequence(cc.spawn(cc.moveBy(68/m.blockSpeed,0,-68),cc.scaleTo(.15,1,1.15)),cc.scaleTo(.1,1,1));a.runAction(c),a.getComponent(cc.AudioSource).play()}},nodeFun:function(e,r,o){if(o.blockType<8||11==o.blockType){for(var t=0;t<m.blockArr.length;t++)if(m.blockArr[t].name==o.icon){if((i=cc.instantiate(m.blockArr[t])).colorId=o.colorId,i.i=e,i.j=r,i.x=68*r-272,i.y=272-68*e,i.des=!1,i.tzIndex=0,i.hv="",i.round=0,i.heightNodePX=null,i.heightNodePY=null,i.animNum=0,1==o.blockType)i.heightLevel=0;else if(2==o.blockType)i.hv="h",i.round=1,i.heightLevel=3;else if(3==o.blockType)i.hv="v",i.round=0,i.heightLevel=3;else if(5==o.blockType)i.heightLevel=2,i.bz=!0;else if(6==o.blockType){i.heightLevel=1;var c=cc.repeatForever(cc.rotateBy(5,120));i.runAction(c)}else 7==o.blockType&&(i.heightLevel=5);"transport_1"==i.name?i.state="boom":i.state="stand",m.gameLayNode.addChild(i),i.on("touchstart",this.touchEndMove,i),i.on("touchmove",this.touchMoveMove,i),i.on("touchend",this.touchEndEnd,i),i.on("touchcancel",function(e){m.readyMoveNode});break}}else if(8==o.blockType){var i;(i=cc.instantiate(a.prototype.createFly(o.colorId[1],o.colorId[2],o.colorId[0]))).i=e,i.j=r,i.x=68*r-272,i.y=272-68*e,i.colorid=[o.colorId[1],o.colorId[2]],i.heightLevel=4,i.state="stand",i.tzIndex=0,m.gameLayNode.addChild(i),i.on("touchstart",m.touchEndMove,i),i.on("touchmove",m.touchMoveMove,i),i.on("touchend",m.touchEndEnd,i),i.on("touchcancel",function(e){m.readyMoveNode})}},cloneToFly:function(e,r){for(var o=[],t=0;t<colorArr.length;t++)o.push(colorArr[t]);var c=Math.floor(Math.random()*(o.length-.01)),i=o[c];o.splice(c,1);var n=o[Math.floor(Math.random()*(o.length-.01))],h=Math.floor(2*Math.random()),d=cc.instantiate(a.prototype.createFly(i,n,h));d.i=e,d.j=r,d.x=68*r-272,d.y=272-68*e,d.colorid=[i,n],d.heightLevel=4,d.colorId=0,d.state="stand",d.tzIndex=0,m.gameLayNode.addChild(d),d.on("touchstart",m.touchEndMove,d),d.on("touchmove",m.touchMoveMove,d),d.on("touchend",m.touchEndEnd,d),d.on("touchcancel",function(e){m.readyMoveNode}),gameLayArr[e][r]=d},nodeAnimDes:function(){this.animNum--,this.animNum||this.destroy()},checkorderFun:function(e){for(var r=0;r<m.order.length;r++)e.name==m.order[r].iconEdit&&m.order[r].num>0&&(m.order[r].num--,m.orderNum[r].string=m.order[r].num)},desAnimFun:function(e){if(m.checkorderFun(e),e.getComponent(cc.Animation)&&99!=e.heightLevel)if(e.colorId||e.colorid){for(var r=0;r<e.getChildren().length;r++){"shining"!=e.getChildren()[r].name&&(e.animNum++,e.getChildren()[r].getComponent(cc.Animation).on("finished",m.nodeAnimDes,e),e.getChildren()[r].getComponent(cc.Animation).play());for(var o=0;o<e.getChildren()[r].getChildren().length;o++)e.animNum++,e.getChildren()[r].getChildren()[o].getComponent(cc.Animation).on("finished",m.nodeAnimDes,e),e.getChildren()[r].getChildren()[o].getComponent(cc.Animation).play()}e.getChildByName("break")?e.getChildByName("break").getComponent(cc.Animation).on("finished",m.nodeDes,e):(e.animNum++,e.getComponent(cc.Animation).on("finished",m.nodeAnimDes,e)),e.getComponent(cc.Animation).play(),3==e.heightLevel||(1==e.heightLevel?(e.stopAllActions(),e.getChildByName("boom").getComponent(cc.Animation).on("finished",m.nodeDes,e)):2!=e.heightLevel&&(e.getChildByName("break")?e.getChildByName("break").rotation=360*Math.random():e.rotation=360*Math.random())),4!=e.heightLevel||e.flyCreated||(m.flyFly=!0,i.prototype.flyFun(e))}else 5==e.heightLevel&&5!=gameLayArr[e.i][e.j].heightLevel?e.destroy():(gameLayArr[e.i][e.j]="-100",e.destroy());else 4!=e.heightLevel||e.flyCreated||(m.flyFly=!0,i.prototype.flyFun(e)),gameLayArr[e.i][e.j]="-100",e.destroy()},twDelayAnimFun:function(e){var r=cc.callFunc(function(){m.desAnimFun(this)},e),o=cc.sequence(cc.delayTime(e.delTime),r);e.runAction(o)},destroyNode:function(e){if(!m.gameOver){if(!e){rcheckArr.length?""!=rcheckArr[0].name&&m.boomSound.play():tcheckedArr.length?""!=tcheckedArr[0].name&&m.boomSound.play():vcheckedArr.length?""!=vcheckedArr[0].name&&m.boomSound.play():hcheckedArr.length?""!=hcheckedArr[0].name&&m.boomSound.play():bzcheckArr.length?""!=bzcheckArr[0].name&&m.boomSound.play():flycheckArr.length&&""!=flycheckArr[0].name&&m.boomSound.play();for(var r=0;r<rcheckArr.length;r++)for(var o=0;o<rcheckArr[r].arr.length;o++)if(rcheckArr[r].arr[o]&&"-100"!=rcheckArr[r].arr[o]){if("clone"==rcheckArr[r].arr[o].name&&m.checkorderFun(rcheckArr[r].arr[o]),"transport_1"==rcheckArr[r].arr[o].name||""==rcheckArr[r].name){rcheckArr[r].arr.splice(o,1),o--;continue}if(!rcheckArr[r].arr[o].des)if(rcheckArr[r].arr[o].des=!0,null!=rcheckArr[r].arr[o].heightNodePX){var t=cc.callFunc(function(){m.desAnimFun(this)},rcheckArr[r].arr[o]),a=cc.sequence(cc.moveTo(.18,rcheckArr[r].arr[o].heightNodePX,rcheckArr[r].arr[o].heightNodePY),t);rcheckArr[r].arr[o].scaleX=.9,rcheckArr[r].arr[o].scaleY=.9,rcheckArr[r].arr[o].runAction(a)}else if(rcheckArr[r].arr[o].delTime){var c=rcheckArr[r].arr[o];m.twDelayAnimFun(c)}else m.desAnimFun(rcheckArr[r].arr[o])}for(r=0;r<tcheckedArr.length;r++)if(tcheckedArr[r]&&"-100"!=tcheckedArr[r]){if("clone"==tcheckedArr[r].name&&m.checkorderFun(tcheckedArr[r]),"transport_1"==tcheckedArr[r].name||""==tcheckedArr[r].name){tcheckedArr.splice(r,1),r--;continue}if(!tcheckedArr[r].des)if(tcheckedArr[r].des=!0,null!=tcheckedArr[r].heightNodePX){t=cc.callFunc(function(){m.desAnimFun(this)},tcheckedArr[r]),a=cc.sequence(cc.moveTo(.18,tcheckedArr[r].heightNodePX,tcheckedArr[r].heightNodePY),t);tcheckedArr[r].scaleX=.9,tcheckedArr[r].scaleY=.9,tcheckedArr[r].runAction(a)}else if(tcheckedArr[r].delTime){c=tcheckedArr[r];m.twDelayAnimFun(c)}else m.desAnimFun(tcheckedArr[r])}for(r=0;r<vcheckedArr.length;r++)if(vcheckedArr[r]&&"-100"!=vcheckedArr[r]){if("clone"==vcheckedArr[r].name&&m.checkorderFun(vcheckedArr[r]),"transport_1"==vcheckedArr[r].name||""==vcheckedArr[r].name){vcheckedArr.splice(r,1),r--;continue}if(!vcheckedArr[r].des)if(vcheckedArr[r].des=!0,null!=vcheckedArr[r].heightNodePX){t=cc.callFunc(function(){m.desAnimFun(this)},vcheckedArr[r]),a=cc.sequence(cc.moveTo(.18,vcheckedArr[r].heightNodePX,vcheckedArr[r].heightNodePY),t);vcheckedArr[r].scaleX=.9,vcheckedArr[r].scaleY=.9,vcheckedArr[r].runAction(a)}else if(vcheckedArr[r].delTime){c=vcheckedArr[r];m.twDelayAnimFun(c)}else m.desAnimFun(vcheckedArr[r])}for(r=0;r<hcheckedArr.length;r++)if(hcheckedArr[r]&&"-100"!=hcheckedArr[r]){if("clone"==hcheckedArr[r].name&&m.checkorderFun(hcheckedArr[r]),"transport_1"==hcheckedArr[r].name||""==hcheckedArr[r].name){hcheckedArr.splice(r,1),r--;continue}if(!hcheckedArr[r].des)if(hcheckedArr[r].des=!0,null!=hcheckedArr[r].heightNodePX){t=cc.callFunc(function(){m.desAnimFun(this)},hcheckedArr[r]),a=cc.sequence(cc.moveTo(.18,hcheckedArr[r].heightNodePX,hcheckedArr[r].heightNodePY),t);hcheckedArr[r].scaleX=.9,hcheckedArr[r].scaleY=.9,hcheckedArr[r].runAction(a)}else if(hcheckedArr[r].delTime){c=hcheckedArr[r];m.twDelayAnimFun(c)}else m.desAnimFun(hcheckedArr[r])}for(r=0;r<bzcheckArr.length;r++)if(bzcheckArr[r]&&"-100"!=bzcheckArr[r]){if("clone"==bzcheckArr[r].name&&m.checkorderFun(bzcheckArr[r]),"transport_1"==bzcheckArr[r].name||""==bzcheckArr[r].name){bzcheckArr.splice(r,1),r--;continue}if(!bzcheckArr[r].des)if(bzcheckArr[r].des=!0,null!=bzcheckArr[r].heightNodePX){t=cc.callFunc(function(){m.desAnimFun(this)},bzcheckArr[r]),a=cc.sequence(cc.moveTo(.18,bzcheckArr[r].heightNodePX,bzcheckArr[r].heightNodePY),t);bzcheckArr[r].scaleX=.9,bzcheckArr[r].scaleY=.9,bzcheckArr[r].runAction(a)}else if(bzcheckArr[r].delTime){c=bzcheckArr[r];m.twDelayAnimFun(c)}else m.desAnimFun(bzcheckArr[r])}for(r=0;r<flycheckArr.length;r++)if(""==flycheckArr[r].name)flycheckArr.splice(r,1),r--;else if(flycheckArr[r]&&"-100"!=flycheckArr[r]){if("clone"==flycheckArr[r].name&&m.checkorderFun(flycheckArr[r]),"transport_1"==flycheckArr[r].name||""==flycheckArr[r].name){flycheckArr.splice(r,1),r--;continue}if(!flycheckArr[r].des)if(flycheckArr[r].des=!0,null!=flycheckArr[r].heightNodePX){t=cc.callFunc(function(){m.desAnimFun(this)},flycheckArr[r]),a=cc.sequence(cc.moveTo(.18,flycheckArr[r].heightNodePX,flycheckArr[r].heightNodePY),t);flycheckArr[r].scaleX=.9,flycheckArr[r].scaleY=.9,flycheckArr[r].runAction(a)}else if(flycheckArr[r].delTime){c=flycheckArr[r];m.twDelayAnimFun(c)}else m.desAnimFun(flycheckArr[r])}}m.createHeightLevel(),m.canControl=!1}},nodeDes:function(){this.destroy()},gameArrFun:function(e){var r=0;gameLayArr=[];for(var o=0;o<e.length;o++){for(var t=[],a=0;a<e[o].length;a++,r++)"-1"==e[o][a]?t[a]="-100":t[a]=null;gameLayArr.push(t)}for(o=0;o<m.gameLayNode.getChildren().length;o++)gameLayArr[m.gameLayNode.getChildren()[o].i][m.gameLayNode.getChildren()[o].j]=m.gameLayNode.getChildren()[o];m.checkDown()},createHeightLevel:function(){if(!m.gameOver){for(var e=0;e<heightLevelArr.length;e++)if(5==gameLayArr[heightLevelArr[e].i][heightLevelArr[e].j].heightLevel&&gameLayArr[heightLevelArr[e].i][heightLevelArr[e].j].destroy(),gameLayArr[heightLevelArr[e].i][heightLevelArr[e].j]=heightLevelArr[e],m.gameLayNode.addChild(gameLayArr[heightLevelArr[e].i][heightLevelArr[e].j]),heightLevelArr[e].state="stand",heightLevelArr[e].tzIndex=0,heightLevelArr[e].des=!1,heightLevelArr[e].animNum=0,heightLevelArr[e].on("touchstart",m.touchEndMove,heightLevelArr[e]),heightLevelArr[e].on("touchmove",m.touchMoveMove,heightLevelArr[e]),heightLevelArr[e].on("touchend",m.touchEndEnd,heightLevelArr[e]),heightLevelArr[e].on("touchcancel",function(e){m.readyMoveNode}),1==heightLevelArr[e].heightLevel){var r=cc.repeatForever(cc.rotateBy(5,120));heightLevelArr[e].runAction(r)}if(moveEdNode&&otherMovedNode&&moveEdNode.des&&otherMovedNode.des&&moveEdNode.colorId!=otherMovedNode.colorId){var o=null;moveEdNode.flyCreated||otherMovedNode.flyCreated||gameLayArr[moveEdNode.i][moveEdNode.j].heightLevel||gameLayArr[otherMovedNode.i][otherMovedNode.j].heightLevel||moveEdNode.heightLevel||otherMovedNode.heightLevel||""!=moveEdNode.hv||""!=otherMovedNode.hv?moveEdNode.flyCreated||gameLayArr[moveEdNode.i][moveEdNode.j].heightLevel||moveEdNode.heightLevel||""!=moveEdNode.hv?otherMovedNode.flyCreated||gameLayArr[otherMovedNode.i][otherMovedNode.j].heightLevel||otherMovedNode.heightLevel||""!=otherMovedNode.hv||((o=moveEdNode.i<otherMovedNode.i||moveEdNode.j<otherMovedNode.j?cc.instantiate(a.prototype.createFly(moveEdNode.colorId,otherMovedNode.colorId,moveEdNode.round)):cc.instantiate(a.prototype.createFly(otherMovedNode.colorId,moveEdNode.colorId,moveEdNode.round))).i=otherMovedNode.i,o.j=otherMovedNode.j,o.x=otherMovedNode.x,o.y=otherMovedNode.y,o.colorid=[moveEdNode.colorId,otherMovedNode.colorId],o.state="stand",o.heightLevel=4,o.colorId=0,gameLayArr[o.i][o.j]=o,m.gameLayNode.addChild(o),o.on("touchstart",m.touchEndMove,o),o.on("touchmove",m.touchMoveMove,o),o.on("touchend",m.touchEndEnd,o),o.on("touchcancel",function(e){m.readyMoveNode})):((o=moveEdNode.i<otherMovedNode.i||moveEdNode.j<otherMovedNode.j?cc.instantiate(a.prototype.createFly(moveEdNode.colorId,otherMovedNode.colorId,moveEdNode.round)):cc.instantiate(a.prototype.createFly(otherMovedNode.colorId,moveEdNode.colorId,moveEdNode.round))).i=moveEdNode.i,o.j=moveEdNode.j,o.x=moveEdNode.x,o.y=moveEdNode.y,o.colorid=[moveEdNode.colorId,otherMovedNode.colorId],o.heightLevel=4,o.colorId=0,o.state="stand",gameLayArr[o.i][o.j]=o,m.gameLayNode.addChild(o),o.on("touchstart",m.touchEndMove,o),o.on("touchmove",m.touchMoveMove,o),o.on("touchend",m.touchEndEnd,o),o.on("touchcancel",function(e){m.readyMoveNode})):((o=moveEdNode.i<otherMovedNode.i||moveEdNode.j<otherMovedNode.j?cc.instantiate(a.prototype.createFly(moveEdNode.colorId,otherMovedNode.colorId,moveEdNode.round)):cc.instantiate(a.prototype.createFly(otherMovedNode.colorId,moveEdNode.colorId,moveEdNode.round))).i=moveEdNode.i,o.j=moveEdNode.j,o.x=moveEdNode.x,o.y=moveEdNode.y,o.colorid=[moveEdNode.colorId,otherMovedNode.colorId],o.heightLevel=4,o.colorId=0,gameLayArr[o.i][o.j]=o,o.state="stand",m.gameLayNode.addChild(o),o.on("touchstart",m.touchEndMove,o),o.on("touchmove",m.touchMoveMove,o),o.on("touchend",m.touchEndEnd,o),o.on("touchcancel",function(e){m.readyMoveNode}))}moveEdNode=null,otherMovedNode=null,heightLevelArr=[],m.drawDown(),rcheckArr=[]}},drawDown:function(){for(var e=0;e<gameLayArr.length;e++)for(var r=0;r<gameLayArr[e].length;r++)"-100"!=gameLayArr[e][r]&&gameLayArr[e][r]&&gameLayArr[e][r].des&&(gameLayArr[e][r]="-100");setTimeout(function(){m.checkDown()},200)},checkDown:function(){m.gameOver||m.verticalDown()},leftDown:function(){if(!m.gameOver){for(var e=!1,r=0;r<gameLayArr.length-1;r++){for(var o=0;o<9;o++){if(r<8&&o<8&&"-100"!=gameLayArr[r+1][o]&&"-100"==gameLayArr[r+1][o+1]&&null!=gameLayArr[r][o]&&"-100"!=gameLayArr[r][o]){gameLayArr[r+1][o+1]=gameLayArr[r][o],gameLayArr[r][o]="-100",gameLayArr[r+1][o+1].i=r+1,gameLayArr[r+1][o+1].j=o+1;var t=cc.callFunc(function(){m.leftDownNum--},gameLayArr[r+1][o+1]),a=cc.sequence(cc.moveBy(95.88/m.blockSpeed,68,-68),t);gameLayArr[r+1][o+1].runAction(a),e=!0,m.leftDownNum++}if(!e&&r<8&&o>0&&"-100"!=gameLayArr[r+1][o]&&"-100"==gameLayArr[r+1][o-1]&&null!=gameLayArr[r][o]&&"-100"!=gameLayArr[r][o]){gameLayArr[r+1][o-1]=gameLayArr[r][o],gameLayArr[r][o]="-100",gameLayArr[r+1][o-1].i=r+1,gameLayArr[r+1][o-1].j=o-1;t=cc.callFunc(function(){m.rightDownNum--,m.rightDownNum||m.downNum||m.verticalDown()},gameLayArr[r+1][o-1]),a=cc.sequence(cc.moveBy(95.88/m.blockSpeed,-68,-68),t);gameLayArr[r+1][o-1].runAction(a),e=!0,m.rightDownNum++}}if(e)break}e?m.verticalDown():m.rightDown()}},rightDown:function(){if(!m.gameOver){for(var e=!1,r=0;r<gameLayArr.length-1;r++){for(var o=0;o<9;o++)if(r<8&&o>0&&"-100"!=gameLayArr[r+1][o]&&"-100"==gameLayArr[r+1][o-1]&&null!=gameLayArr[r][o]&&"-100"!=gameLayArr[r][o]){gameLayArr[r+1][o-1]=gameLayArr[r][o],gameLayArr[r][o]="-100",gameLayArr[r+1][o-1].i=r+1,gameLayArr[r+1][o-1].j=o-1;var t=cc.callFunc(function(){m.rightDownNum--,m.rightDownNum||m.downNum||m.verticalDown()},gameLayArr[r+1][o-1]),a=cc.sequence(cc.spawn(cc.sequence(cc.moveBy(95.88/m.blockSpeed,-68,-68),t),cc.scaleTo(.2,1,1.15)),cc.scaleTo(.15,1,1));gameLayArr[r+1][o-1].runAction(a),e=!0,m.rightDownNum++}if(e)break}e||m.rightDownNum||m.downNum?e&&m.verticalDown():(m.checkHappy(),m.checkConnected()?0==rcheckArr.length&&m.destroyNode():m.flyFly?(m.canControl=!0,m.boardState=!0,m.flyTargetArrFun()):(n.prototype.timersReset(),n.prototype.exchangCheckArrFun(gameLayArr)||(m.canControl=!0,m.noMoved=!0,m.checkResult())))}},checkEnd:function(){return m.order.length>1?0==m.order[0].num&&0==m.order[1].num:0==m.order[0].num},gamePass:function(){m.resultNode.active=!0,m.resultNode.getChildByName("success").active=!0,m.resultNode.getChildByName("fail").active=!1,d.prototype.happy();var e=gameParamObj.apiUrl+"/api/core.php?type=record",r="type=pass&step="+(m.totleSteps-m.steps);h.sendobj(r,"pass",m.passFun,m,e)},checkGameOver:function(){m.gameOver||(m.order.length>1?0==m.order[0].num&&0==m.order[1].num?(m.celebrateNode.active=!0,m.gameOver=!0,m.celebrateNode.getComponent(cc.Animation).on("finished",m.gamePass,m),m.celebrateNode.getComponent(cc.Animation).play(),null==seIded?seIded=seId+"|":seIded=seIded+""+seId+"|",document.cookie="clearId="+seIded,document.cookie="missionId=",m.resultNode.getChildByName("replay").getChildByName("l2").getComponent(cc.Label).string="Next",m.resultNode.getChildByName("replay").getChildByName("l").getComponent(cc.Label).string="Next"):m.failResultFun():0==m.order[0].num?(m.celebrateNode.active=!0,m.gameOver=!0,m.celebrateNode.getComponent(cc.Animation).on("finished",m.gamePass,m),m.celebrateNode.getComponent(cc.Animation).play(),null==seIded?seIded=seId+"|":seIded=seIded+""+seId+"|",document.cookie="clearId="+seIded,document.cookie="missionId=",m.resultNode.getChildByName("replay").getChildByName("l2").getComponent(cc.Label).string="Next",m.resultNode.getChildByName("replay").getChildByName("l").getComponent(cc.Label).string="Next"):m.failResultFun())},checkResult:function(){m.order.length>1?0==m.order[0].num&&0==m.order[1].num?(m.celebrateNode.active=!0,m.gameOver=!0,m.celebrateNode.getComponent(cc.Animation).on("finished",m.gamePass,m),m.celebrateNode.getComponent(cc.Animation).play(),null==seIded?seIded=seId+"|":seIded=seIded+""+seId+"|",document.cookie="clearId="+seIded,document.cookie="missionId=",m.resultNode.getChildByName("replay").getChildByName("l2").getComponent(cc.Label).string="Next",m.resultNode.getChildByName("replay").getChildByName("l").getComponent(cc.Label).string="Next"):m.steps<=0&&m.failResultFun():0==m.order[0].num?(m.celebrateNode.active=!0,m.gameOver=!0,m.celebrateNode.getComponent(cc.Animation).on("finished",m.gamePass,m),m.celebrateNode.getComponent(cc.Animation).play(),null==seIded?seIded=seId+"|":seIded=seIded+""+seId+"|",document.cookie="clearId="+seIded,document.cookie="missionId=",m.resultNode.getChildByName("replay").getChildByName("l2").getComponent(cc.Label).string="Next",m.resultNode.getChildByName("replay").getChildByName("l").getComponent(cc.Label).string="Next"):m.steps<=0&&m.failResultFun()},failResultFun:function(){if(m.resultNode.getChildByName("replay").getChildByName("l2").getComponent(cc.Label).string="Retry",m.resultNode.getChildByName("replay").getChildByName("l").getComponent(cc.Label).string="Retry",_bd_share_config.common.bdUrl=shareURL+"?missionId="+seId,document.getElementById("gameURL").innerHTML=_bd_share_config.common.bdUrl,gameTimes>0&&(gameTimes--,document.cookie="gameTimes="+gameTimes),0==gameTimes){m.resultNode.active=!0,m.resultNode.getChildByName("success").active=!1,m.resultNode.getChildByName("fail").active=!0,m.resultNode.getChildByName("replay").active=!1,m.resultNode.getChildByName("share").x=0,m.resultNode.getChildByName("fail").getChildByName("l").active=!0,m.gameOver=!0;var e=gameParamObj.apiUrl+"/api/core.php?type=record",r="type=fail";h.sendobj(r,"fail",m.failFun,m,e)}else{m.resultNode.active=!0,m.resultNode.getChildByName("success").active=!1,m.resultNode.getChildByName("fail").active=!0,m.gameOver=!0;e=gameParamObj.apiUrl+"/api/core.php?type=record",r="type=fail";h.sendobj(r,"fail",m.failFun,m,e)}d.prototype.sad()},verticalDown:function(){if(!m.gameOver){for(var e=!1,r=0;r<9;r++)for(var o=0,t=gameLayArr.length-1;t>-1;t--)if("-100"!=gameLayArr[t][r]&&null!=gameLayArr[t][r]&&o){if(m.downNum++,gameLayArr[t+o][r]=gameLayArr[t][r],gameLayArr[t][r]="-100",gameLayArr[t+o][r].i=t+o,gameLayArr[t+o][r].j=r,gameLayArr[t+o][r].getNumberOfRunningActions()){m.downNum2++;var a=cc.callFunc(function(){m.downNum2--,m.downNum2||m.checkBlock()},gameLayArr[t+o][r]),c=cc.callFunc(function(){m.downNum--}),i=cc.sequence(cc.spawn(cc.moveBy(68*o/m.blockSpeed+.03,0,68*-o),cc.sequence(cc.delayTime(4*o/m.blockSpeed),a),c,cc.scaleTo(.15,1,1.15)),cc.scaleTo(.1,1,1))}else a=cc.callFunc(function(){m.downNum--,m.downNum||m.checkBlock()},gameLayArr[t+o][r]),i=cc.sequence(cc.spawn(cc.moveBy(68*o/m.blockSpeed,0,68*-o),a,cc.scaleTo(.15,1,1.15)),cc.scaleTo(.1,1,1));gameLayArr[t+o][r].runAction(i),e=!0}else t>0?null==gameLayArr[t-1][r]?o=0:"-100"==gameLayArr[t][r]?o++:null==gameLayArr[t][r]&&(o=0):"-100"==gameLayArr[t][r]&&o++;e||m.checkBlock()}},checkConnected:function(){if(!m.gameOver)return m.orderTargetArr=[],m.baseTargetArr=[],t.prototype.checkBzBz(),t.prototype.checkColor(),t.prototype.checkH(),t.prototype.checkV(),t.prototype.checkTZ(),!!(vcheckedArr.length||hcheckedArr.length||tcheckedArr.length||bzcheckArr.length)},checkAllBoom:function(){if(!m.gameOver)return!!m.canControl},flyNumAdd:function(){m.flyNum++},flyBoom:function(e){m.flyNum--,m.flyNum<=0&&(m.flyFly=!1,0==rcheckArr.length&&m.destroyNode())},getFlyBoard:function(){return m.boardState},getFlyNum:function(){return m.flyNum},passFun:function(e){},failFun:function(e){},checkHappy:function(){if(m.transportArr)for(var e=0;e<gameLayArr.length;e++)for(var r=0;r<gameLayArr[e].length;r++)if(gameLayArr[e][r]&&"-100"!=gameLayArr[e][r]&&"transport_1"==gameLayArr[e][r].name)for(var o=0;o<m.transportArr.length;o++)if(e==m.transportArr[o].y&&r==m.transportArr[o].x)return m.checkorderFun(gameLayArr[e][r]),l.prototype.endMove(gameLayArr[e][r],e,r),gameLayArr[e][r].off("touchstart"),gameLayArr[e][r].off("touchmove"),gameLayArr[e][r].off("touchend"),gameLayArr[e][r].off("touchcancel"),gameLayArr[e][r]="-100",m.checkDown(),!0;return!1},canvasAction:function(){m.layPNode.getComponent(cc.Animation).play()},twbzBoomEnd:function(e){t.prototype.flyhBoom(e.i,e.j,e.colorId),e.i-1>-1&&t.prototype.flyhBoom(e.i-1,e.j,e.colorId),e.i+1<9&&t.prototype.flyhBoom(e.i+1,e.j,e.colorId),t.prototype.flyvBoom(e.j,e.i,e.colorId),e.j-1>-1&&t.prototype.flyvBoom(e.j-1,e.i,e.colorId),e.j+1<9&&t.prototype.flyvBoom(e.j+1,e.i,e.colorId),0==rcheckArr.length&&(hcheckedArr.push(e),m.destroyNode())},twbzAnimPlay:function(){this.destroy()},twbzBoomFun:function(e,r){for(var o=-1;o<2;o++)for(var t=-1;t<2;t++)if(e.i+o<9&&e.i+o>-1&&e.j+t<9&&e.j+t>-1&&gameLayArr[e.i+o][e.j+t]&&"-100"!=gameLayArr[e.i+o][e.j+t]){m.twbzBoomNum++;var a=cc.moveTo(.18,e.x,e.y);gameLayArr[e.i+o][e.j+t].scaleX=.9,gameLayArr[e.i+o][e.j+t].scaleY=.9,gameLayArr[e.i+o][e.j+t].runAction(a)}var c=cc.instantiate(m.twbzboomPrefab);m.streakLay.addChild(c),c.getComponent(cc.Animation).on("finished",m.twbzAnimPlay,c),2==e.heightLevel?(e.bz=!1,e.heightLevel=97,c.x=e.x,c.y=e.y,1==r.colorId?(c.getComponent(cc.Animation).play("red"),c.getChildByName("h").getComponent(cc.Animation).play("red")):2==r.colorId?(c.getComponent(cc.Animation).play("orign"),c.getChildByName("h").getComponent(cc.Animation).play("orign")):3==r.colorId?(c.getComponent(cc.Animation).play("yellow"),c.getChildByName("h").getComponent(cc.Animation).play("yellow")):4==r.colorId?(c.getComponent(cc.Animation).play("green"),c.getChildByName("h").getComponent(cc.Animation).play("green")):5==r.colorId?(c.getComponent(cc.Animation).play("blue"),c.getChildByName("h").getComponent(cc.Animation).play("blue")):6==r.colorId&&(c.getComponent(cc.Animation).play("vt"),c.getChildByName("h").getComponent(cc.Animation).play("vt"))):2==r.heightLevel&&(r.bz=!1,r.heightLevel=97,c.x=e.x,c.y=e.y,1==e.colorId?(c.getComponent(cc.Animation).play("red"),c.getChildByName("h").getComponent(cc.Animation).play("red")):2==e.colorId?(c.getComponent(cc.Animation).play("orign"),c.getChildByName("h").getComponent(cc.Animation).play("orign")):3==e.colorId?(c.getComponent(cc.Animation).play("yellow"),c.getChildByName("h").getComponent(cc.Animation).play("yellow")):4==e.colorId?(c.getComponent(cc.Animation).play("green"),c.getChildByName("h").getComponent(cc.Animation).play("green")):5==e.colorId?(c.getComponent(cc.Animation).play("blue"),c.getChildByName("h").getComponent(cc.Animation).play("blue")):6==e.colorId&&(c.getComponent(cc.Animation).play("vt"),c.getChildByName("h").getComponent(cc.Animation).play("vt"))),m.twbzBoomEnd(e)},flytwAnimFun:function(e,r,o){if(o)var t=cc.instantiate(m.twBoom[1]);else t=cc.instantiate(m.twBoom[0]);m.streakLay.addChild(t),t.x=e,t.y=r,t.getComponent(cc.Animation).on("finished",m.destroyflytw,t),t.getComponent(cc.Animation).play()},destroyflytw:function(){this.destroy()},flybzAnimFun:function(e,r,o){var t=cc.instantiate(m.bzBoom[o-1]);m.streakLay.addChild(t),t.x=e,t.y=r,t.getComponent(cc.Animation).on("finished",m.destroyflytw,t),t.getComponent(cc.Animation).play()},flyTargetArrFun:function(){m.orderTargetArr=[],m.baseTargetArr=[];for(var e=0;e<gameLayArr.length;e++)for(var r=0;r<gameLayArr[e].length;r++)if(null!=gameLayArr[e][r]&&"-100"!=gameLayArr[e][r]&&"stand"==gameLayArr[e][r].state)for(var o=0;o<m.order.length;o++)gameLayArr[e][r].name==m.order[o].iconEdit?m.orderTargetArr.push(gameLayArr[e][r]):m.baseTargetArr.push(gameLayArr[e][r])},getFlyTarget:function(){if(m.flyOrderInit(),m.orderTargetArr.length){var e=Math.floor(Math.random()*(m.orderTargetArr.length-.01));if("stand"==m.orderTargetArr[e].state){var r={x:m.orderTargetArr[e].x,y:m.orderTargetArr[e].y,i:m.orderTargetArr[e].i,j:m.orderTargetArr[e].j};return m.orderTargetArr.splice(e,1),r}m.orderTargetArr.splice(e,1),m.getFlyTarget()}else if(m.baseTargetArr.length){e=Math.floor(Math.random()*(m.baseTargetArr.length-.01));if("stand"==m.baseTargetArr[e].state){r={x:m.baseTargetArr[e].x,y:m.baseTargetArr[e].y,i:m.baseTargetArr[e].i,j:m.baseTargetArr[e].j};return m.baseTargetArr.splice(e,1),r}m.baseTargetArr.splice(e,1),m.getFlyTarget()}else m.flyorderInit||(m.flyorderInit=!0,m.flyTargetArrFun())},dobleColor:function(e,r){var o=cc.instantiate(m.doblePrefab);m.streakLay.addChild(o),o.x=e,o.y=r,o.getComponent(cc.Animation).on("finished",m.destroyflytw,o),o.getComponent(cc.Animation).play()},flyOrderInit:function(){m.flyorderInit=!1}}),cc._RF.pop()},{butterFly:"butterFly",checkBlock:"checkBlock",checkGame:"checkGame",chessBoard:"chessBoard",heightLevelNode:"heightLevelNode",http:"http",nutsJS:"nutsJS",spineCtr:"spineCtr"}],heightLevelNode:[function(e,r,o){"use strict";cc._RF.push(r,"e073bcQKWlPW5GYfI23xKLt","heightLevelNode");var t=null;cc.Class({extends:cc.Component,properties:{rainBowNode:cc.Prefab,butterFlyPrefab:[cc.Prefab],twHPrefab:[cc.Prefab],twVPrefab:[cc.Prefab],bzPrefab:[cc.Prefab]},onLoad:function(){t=this},createRainBow:function(){return t.rainBowNode},createTwH:function(e){return t.twHPrefab[e-1]},createTwV:function(e){return t.twVPrefab[e-1]},createBz:function(e){return t.bzPrefab[e-1]},createFly:function(e,r,o){if(1==e){if(2==r)if(0==o)var a=t.butterFlyPrefab[0];else a=t.butterFlyPrefab[1];else if(3==r)if(0==o)a=t.butterFlyPrefab[2];else a=t.butterFlyPrefab[3];else if(4==r)if(0==o)a=t.butterFlyPrefab[4];else a=t.butterFlyPrefab[5];else if(5==r)if(0==o)a=t.butterFlyPrefab[6];else a=t.butterFlyPrefab[7];else if(6==r)if(0==o)a=t.butterFlyPrefab[8];else a=t.butterFlyPrefab[9]}else if(2==e){if(1==r)if(0==o)a=t.butterFlyPrefab[10];else a=t.butterFlyPrefab[11];else if(3==r)if(0==o)a=t.butterFlyPrefab[12];else a=t.butterFlyPrefab[13];else if(4==r)if(0==o)a=t.butterFlyPrefab[14];else a=t.butterFlyPrefab[15];else if(5==r)if(0==o)a=t.butterFlyPrefab[16];else a=t.butterFlyPrefab[17];else if(6==r)if(0==o)a=t.butterFlyPrefab[18];else a=t.butterFlyPrefab[19]}else if(3==e){if(1==r)if(0==o)a=t.butterFlyPrefab[20];else a=t.butterFlyPrefab[21];else if(2==r)if(0==o)a=t.butterFlyPrefab[22];else a=t.butterFlyPrefab[23];else if(4==r)if(0==o)a=t.butterFlyPrefab[24];else a=t.butterFlyPrefab[25];else if(5==r)if(0==o)a=t.butterFlyPrefab[26];else a=t.butterFlyPrefab[27];else if(6==r)if(0==o)a=t.butterFlyPrefab[28];else a=t.butterFlyPrefab[29]}else if(4==e){if(1==r)if(0==o)a=t.butterFlyPrefab[30];else a=t.butterFlyPrefab[31];else if(2==r)if(0==o)a=t.butterFlyPrefab[32];else a=t.butterFlyPrefab[33];else if(3==r)if(0==o)a=t.butterFlyPrefab[34];else a=t.butterFlyPrefab[35];else if(5==r)if(0==o)a=t.butterFlyPrefab[36];else a=t.butterFlyPrefab[37];else if(6==r)if(0==o)a=t.butterFlyPrefab[38];else a=t.butterFlyPrefab[39]}else if(5==e){if(1==r)if(0==o)a=t.butterFlyPrefab[40];else a=t.butterFlyPrefab[41];else if(2==r)if(0==o)a=t.butterFlyPrefab[42];else a=t.butterFlyPrefab[43];else if(3==r)if(0==o)a=t.butterFlyPrefab[44];else a=t.butterFlyPrefab[45];else if(4==r)if(0==o)a=t.butterFlyPrefab[46];else a=t.butterFlyPrefab[47];else if(6==r)if(0==o)a=t.butterFlyPrefab[48];else a=t.butterFlyPrefab[49]}else if(6==e)if(1==r)if(0==o)a=t.butterFlyPrefab[50];else a=t.butterFlyPrefab[51];else if(2==r)if(0==o)a=t.butterFlyPrefab[52];else a=t.butterFlyPrefab[53];else if(3==r)if(0==o)a=t.butterFlyPrefab[54];else a=t.butterFlyPrefab[55];else if(4==r)if(0==o)a=t.butterFlyPrefab[56];else a=t.butterFlyPrefab[57];else if(5==r)if(0==o)a=t.butterFlyPrefab[58];else a=t.butterFlyPrefab[59];return a}}),cc._RF.pop()},{}],http:[function(e,r,o){"use strict";cc._RF.push(r,"618be2tk9tPSIe0XM2z0WEw","http");var t=[];r.exports={sendobj:function(e,r,o,a,c){t.push({key:r,fun:o});var i=new XMLHttpRequest;i.withCredentials||(i.open("POST",c,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(e),i.onprogress=function(e){},i.upload.onprogress=function(e){},i.onerror=function(){},i.onload=function(e){var o=JSON.parse(i.response);if(null!=o)for(var a=0;a<t.length;a++)if(t[a].key==r){t[a].fun.apply(null,[o]),t.splice(a,1);break}})}},cc._RF.pop()},{}],loadXML:[function(e,r,o){"use strict";cc._RF.push(r,"280c3rsZJJKnZ9RqbALVwtK","loadXML");var t=e("xmlJS"),a=e("gameJS"),c=null,i=null,n=null,h=null;window.seId=null,window.seIded="",cc.Class({extends:cc.Component,properties:{stepBgNode:cc.Node,executionOrder:-1},onLoad:function(){h=this;var e=cc.find("Canvas").width/2>525?525:cc.find("Canvas").width/2;this.stepBgNode.x=e-this.stepBgNode.width/2+42,h.XMLFun()},getCookie:function(e){var r,o=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(r=document.cookie.match(o))?unescape(r[2]):null},GetQueryString:function(e){var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(r);return null!=o?unescape(o[2]):null},isNumber:function(e){return null!=/^[-]?[0-9]+$/.exec(e)&&""!=e},XMLFun:function(){seId="",seIded=this.getCookie("clearId");for(var e=[],r=0;r<gameParamObj.missionId.length;r++)e.push(gameParamObj.missionId[r]);if(null!=seIded&&""!=seIded){var o=seIded.split("|");for(r=0;r<o.length;r++)for(var a=0;a<e.length;a++)if(e[a]==o[r]){e.splice(a,1);break}if(!e.length){document.cookie="clearId=",e=[];for(r=0;r<gameParamObj.missionId.length;r++)e.push(gameParamObj.missionId[r])}}if(window.location){var c=window.location.href.substring(window.location.href.indexOf("missionId=")+10);for(r=0;r<gameParamObj.missionId.length;r++)c==gameParamObj.missionId[r]&&(seId=c)}if(""==seId&&(seId=this.getCookie("missionId")),null==seId||""==seId){var i=Math.floor(Math.random()*(e.length-.01));seId=e[i],document.cookie="missionId="+seId}t.getXML("xml/blockType","blocktype",h.getBlocktype,h)},getBlocktype:function(e){c=e,t.getXML("xml/orderTarget","ordertarget",h.getOrdertarget,h)},getOrdertarget:function(e){i=e,t.getXML("xml/section_001","section_001",h.section_001,h)},getOrderID:function(e){for(var r=0;r<i.documentElement.children.length;r++)"order"==i.documentElement.children[r].nodeName&&i.documentElement.children[r].getAttribute("orderId")==e.orderId&&(e.orderType=i.documentElement.children[r].getAttribute("orderType"),e.param=i.documentElement.children[r].getAttribute("param"),e.iconEdit=i.documentElement.children[r].getAttribute("iconEdit"),e.iconSmall=i.documentElement.children[r].getAttribute("iconSmall"))},section_001:function(e){n=e;for(var r=[],o=[],t=[],i=-1,d=[],l=[],m=0;m<n.documentElement.children.length;m++)if(n.documentElement.children[m].getAttribute("missionId")==seId)for(var g=n.documentElement.children[m].getAttribute("randomColor").split(","),s=0;s<n.documentElement.children[m].children.length;s++)if("layout"==n.documentElement.children[m].children[s].nodeName){for(var u=0;u<n.documentElement.children[m].children[s].children.length;u++)if("row"==n.documentElement.children[m].children[s].children[u].nodeName){var y=n.documentElement.children[m].children[s].children[u].innerHTML.split(",");r.push(y)}}else if("target"==n.documentElement.children[m].children[s].nodeName){i=n.documentElement.children[m].children[s].getAttribute("steps");for(u=0;u<n.documentElement.children[m].children[s].children.length;u++)if("order"==n.documentElement.children[m].children[s].children[u].nodeName){var A={orderId:null,orderType:null,param:null,iconEdit:null,num:-1,iconSmall:null};A.orderId=n.documentElement.children[m].children[s].children[u].getAttribute("orderId"),h.getOrderID(A),A.num=n.documentElement.children[m].children[s].children[u].getAttribute("nums"),d.push(A)}}else if("trigger"==n.documentElement.children[m].children[s].nodeName){for(u=0;u<n.documentElement.children[m].children[s].children.length;u++)if("create"==n.documentElement.children[m].children[s].children[u].nodeName){var f={x:n.documentElement.children[m].children[s].children[u].getAttribute("x")-1,y:n.documentElement.children[m].children[s].children[u].getAttribute("y")-1};o.push(f)}else if("transport"==n.documentElement.children[m].children[s].children[u].nodeName){var L={x:n.documentElement.children[m].children[s].children[u].getAttribute("x")-1,y:n.documentElement.children[m].children[s].children[u].getAttribute("y")-1};l.push(L)}}else if("blockFactory"==n.documentElement.children[m].children[s].nodeName)for(u=0;u<n.documentElement.children[m].children[s].children.length;u++)if("factory"==n.documentElement.children[m].children[s].children[u].nodeName)for(var v=n.documentElement.children[m].children[s].children[u].children.length,p=n.documentElement.children[m].children[s].children[u].children.length-1;p>=0;p--)if("block"==n.documentElement.children[m].children[s].children[u].children[p].nodeName){var b=0;t.length-1>=0&&(b=t[t.length-1].weight);var N={id:n.documentElement.children[m].children[s].children[u].children[p].getAttribute("blockid"),weight:b+n.documentElement.children[m].children[s].children[u].children[p].getAttribute("weight")/v};t.push(N)}a.prototype.Init(r,i,d,c,o,t,g,l)},update:function(e){}}),cc._RF.pop()},{gameJS:"gameJS",xmlJS:"xmlJS"}],mainJS:[function(e,r,o){"use strict";cc._RF.push(r,"795b42DzZlCRa1AkWMpIZg+","mainJS");var t=e("http"),a=null;cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(a=this,!cc.xx){cc.xx={};var r=e("gameJS");cc.xx.gameJS=new r}var o=gameParamObj.apiUrl+"/api/core.php?type=user";t.sendobj("","user",this.userFun,this,o)},userFun:function(e){if(e.errcode)2==e.errcode&&(window.location=""+e.data);else{var r=gameParamObj.apiUrl+"/api/core.php?type=record";t.sendobj("type=click","click",a.click,a,r),window.gameTimes=a.getCookie("gameTimes"),null==gameTimes?(gameTimes=3,document.cookie="gameTimes="+gameTimes):(gameTimes=parseInt(gameTimes),0==gameTimes&&cc.xx.gameJS.failResultFun())}},click:function(e){console.log(e)},getCookie:function(e){var r,o=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(r=document.cookie.match(o))?unescape(r[2]):null}}),cc._RF.pop()},{gameJS:"gameJS",http:"http"}],nutsJS:[function(e,r,o){"use strict";cc._RF.push(r,"9dc26mJdwJBZ4BXH01yoy4b","nutsJS");var t=null,a=cc.Class({extends:cc.Component,properties:{flyLay:cc.Node},onLoad:function(){t=this},endMove:function(e,r,o){e.parent=t.flyLay;var a=cc.callFunc(function(){var a=68*o-238,c=238-68*r;t.flyMove(this,a,c),e.getChildByName("particle_texture").active=!0},e,r,o),c=cc.sequence(cc.moveTo(.3,68*o-238,238-68*r),a);e.runAction(c)},flyMove:function(e,r,o){e.p0={x:r,y:o},e.zIndex++,e.canfly=!0}});r.exports=a,cc._RF.pop()},{}],nutsblock:[function(e,r,o){"use strict";cc._RF.push(r,"4061fulXxBNiaqhtvvjnLhG","nutsblock"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.canfly=!1,this.t=0,this.node.p0=this.node.position,this.node.p1={x:-302,y:80},this.node.p2={x:-71,y:538}},moveFun:function(e,r,o,t){var a=1-t;this.node.x=a*a*e.x+2*t*a*r.x+t*t*o.x,this.node.y=a*a*e.y+2*t*a*r.y+t*t*o.y},update:function(e){this.node.canfly&&this.t<1&&(this.t+=e,this.t>1&&(this.t=1,this.node.destroy()),this.moveFun(this.node.p0,this.node.p1,this.node.p2,this.t))}}),cc._RF.pop()},{}],resultJS:[function(e,r,o){"use strict";cc._RF.push(r,"db293BqjH5MHa5HNtW9zFMz","resultJS");var t=e("http");cc.Class({extends:cc.Component,properties:{hideNode:cc.Node,lightNode:cc.Node,layNode:cc.Node,layFlyNode:cc.Node,layBgNode:cc.Node,resultNode:cc.Node,celebrateNode:cc.Node},onLoad:function(){if(this.hideNode.on("touchstart",function(e){e.stopPropagation()}),cc.xx){if(!cc.xx.xmlJS){var r=e("loadXML");cc.xx.xmlJS=new r}}else{cc.xx={};r=e("loadXML");cc.xx.xmlJS=new r}},shareClick:function(){var e=gameParamObj.apiUrl+"/api/core.php?type=record";t.sendobj("type=share","share",this.shareCall,this,e);var r=document.getElementById("bdsharebuttonbox");"none"==r.style.display?r.style.display="block":r.style.display="none"},againClick:function(){var e=document.getElementById("bdsharebuttonbox");e&&(e.style.display="none"),this.celebrateNode.active=!1,this.resultNode.active=!1,this.layBgNode.removeAllChildren(),this.layNode.removeAllChildren(),this.layFlyNode.removeAllChildren(),cc.xx.xmlJS.XMLFun()},downloadClick:function(){var e=gameParamObj.apiUrl+"/api/core.php?type=record";t.sendobj("type=download","download",this.downloadCall,this,e)},downloadCall:function(e){window.location="http://sweetmaker.igg.com/download/v2/"},shareCall:function(e){console.log(e)},update:function(e){this.lightNode.rotation+=15*e,this.lightNode.rotation=this.lightNode.rotation>=360?0:this.lightNode.rotation}}),cc._RF.pop()},{http:"http",loadXML:"loadXML"}],shootLine:[function(e,r,o){"use strict";cc._RF.push(r,"2dbf0Q3AHpHL5XuMtRYbjQM","shootLine");var t=null;cc.Class({extends:cc.Component,properties:{layNode:cc.Node,linePrefab:cc.Prefab,shiningNode:cc.Prefab},onLoad:function(){(t=this).state=0,t.shiningArr=[],t.nodeArr=[]},nullArrFun:function(){t.state=1},createline:function(e,r,o,a){var c=cc.instantiate(t.linePrefab);c.rotation=-t.checkAngle(e,r,o,a),c.width=0,c.widthAdd=1,c.widthMax=Math.sqrt((o-e)*(o-e)+(a-r)*(a-r)),c.x=e,c.y=r,c.x2=o,c.y2=a,t.layNode.addChild(c),t.nodeArr.push(c)},checkAngle:function(e,r,o,t){return o>e&&r>t?360+360*Math.atan((t-r)/(o-e))/(2*Math.PI):o==e&&r>t?270:e>o&&r==t?180:e>o&&r>t?180+360*Math.atan((t-r)/(o-e))/(2*Math.PI):e==o&&r<t?90:e>o&&r<t?180+360*Math.atan((t-r)/(o-e))/(2*Math.PI):360*Math.atan((t-r)/(o-e))/(2*Math.PI)},update:function(e){if(1==t.state){for(var r=0;r<t.nodeArr.length;r++)if(1==t.nodeArr[r].widthAdd){if(t.nodeArr[r].width+=t.nodeArr[r].widthMax/gameParamObj.colorLineSpeed,t.nodeArr[r].width>=t.nodeArr[r].widthMax){var o=cc.instantiate(t.shiningNode);t.nodeArr[r].addChild(o),t.shiningArr.push(o),o.getComponent(cc.Animation).play(),t.nodeArr[r].width=t.nodeArr[r].widthMax,t.nodeArr[r].widthAdd=0,t.nodeArr[r].x=t.nodeArr[r].x2,t.nodeArr[r].y=t.nodeArr[r].y2,t.nodeArr[r].rotation=180+t.nodeArr[r].rotation}}else 0==t.nodeArr[r].widthAdd&&(t.nodeArr[r].width-=t.nodeArr[r].widthMax/gameParamObj.colorLineSpeed,t.nodeArr[r].width<=0&&(t.nodeArr[r].width=0,t.nodeArr[r].widthAdd=2,t.nodeArr.splice(r,1),r--));0==t.nodeArr.length&&(t.state=2)}else if(2==t.state){t.state=0;for(r=0;r<t.shiningArr.length;r++)t.shiningArr[r].destroy();t.shiningArr=[],t.nodeArr=[],cc.xx.gameJS.destroyNode()}}}),cc._RF.pop()},{}],spineCtr:[function(e,r,o){"use strict";cc._RF.push(r,"627b2R7CQdD264WqFrb6s36","spineCtr");var t=null;cc.Class({extends:cc.Component,properties:{spineNode:cc.Node},onLoad:function(){t=this,this.spine=this.spineNode.getComponent("sp.Skeleton")},sad:function(){t.spine.setAnimation(0,"nanguo02",!0)},happy:function(){t.spine.setAnimation(0,"idle",!0)}}),cc._RF.pop()},{}],xmlJS:[function(e,r,o){"use strict";cc._RF.push(r,"773203A5b9OQKU1EvjwN0uU","xmlJS");var t=[];r.exports={getXML:function(e,r,o,a){t.push({key:r,fun:o}),cc.loader.loadRes(e,function(e,o){var a=document.implementation.createDocument("","",null);if(window.DOMParser&&null!=(a=(new DOMParser).parseFromString(o,"text/xml")))for(var c=0;c<t.length;c++)if(t[c].key==r){t[c].fun.apply(null,[a]),t.splice(c,1);break}})}},cc._RF.pop()},{}]},{},["cloneBlock","flyBlock","nutsJS","nutsblock","http","xmlJS","resultJS","butterFly","checkBlock","checkGame","chessBoard","gameJS","heightLevelNode","loadXML","mainJS","shootLine","spineCtr"]);